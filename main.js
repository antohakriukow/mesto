(()=>{"use strict";var e={userEditBtn:document.querySelector(".user__edit-btn"),placeAddBtn:document.querySelector(".user__add-btn"),userPopup:document.querySelector(".popup_user"),placePopup:document.querySelector(".popup_place"),fullscreenPopup:document.querySelector(".fullscreen-popup"),popupNameInput:document.querySelector(".popup__input-field_name"),popupAboutInput:document.querySelector(".popup__input-field_about"),cardTemplate:".card-template",popupInputFieldErrorActive:"popup__input-field-error_active",popupInputFieldError:"popup__input-field_error",popupSubmitBtnDisabled:"popup__submit-btn_disabled",formInputSelector:".popup__input-field",formSubmitSelector:".popup__submit-btn",cardAreaSelector:".card-items"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._place=t.place,this._url=t.url,this._selector=n,this._handleCardClick=r}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0).querySelector(".card")}},{key:"_handleDelete",value:function(){this._element.remove(),this._element=null}},{key:"_handleLike",value:function(){this._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active")}},{key:"_setListeners",value:function(){var e=this;this._element.querySelector(".card__trash-btn").addEventListener("click",(function(){return e._handleDelete()})),this._element.querySelector(".card__heart-btn").addEventListener("click",(function(){return e._handleLike()})),this._element.querySelector(".card__img").addEventListener("click",(function(){return e._handleCardClick()}))}},{key:"getElement",value:function(){this._element=this._getTemplate();var e=this._element.querySelector(".card__img");return this._element.querySelector(".card__title").innerText=this._place,e.setAttribute("src",this._url),e.setAttribute("alt",this._place),this._setListeners(),this._element}}])&&t(n.prototype,r),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._formInputErrorActiveClass=t.popupInputFieldErrorActive,this._popupInputFieldError=t.popupInputFieldError,this._popupSubmitBtnDisabled=t.popupSubmitBtnDisabled,this._formInputSelector=t.formInputSelector,this._formSubmitSelector=t.formSubmitSelector,this._inputFields=Array.from(n.querySelectorAll(t.formInputSelector)),this._submitBtn=n.querySelector(t.formSubmitSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error")),r=n.previousElementSibling;n.textContent=t,n.classList.add(this._formInputErrorActiveClass),r.classList.add(this._popupInputFieldError)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error")),n=t.previousElementSibling;t.textContent="",t.classList.remove(this._formInputErrorActiveClass),n.classList.remove(this._popupInputFieldError)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputFields.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitBtn.classList.add(this._popupSubmitBtnDisabled),this._submitBtn.setAttribute("disabled",!0)):(this._submitBtn.classList.remove(this._popupSubmitBtnDisabled),this._submitBtn.removeAttribute("disabled"))}},{key:"_setValidationEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._formInputSelector)),n=this._formElement.querySelector(this._formSubmitSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e.toggleButtonState(t,n)}))})),this.toggleButtonState(t,n)}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setValidationEventListeners()}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=document.querySelector(".body"),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){u.classList.add("body_noscroll"),this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),u.classList.remove("body_noscroll"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()})),this._popup.addEventListener("click",(function(t){e._closePopupByClickOnOverlay(t)}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closePopupByClickOnOverlay",value:function(e){e.target===e.currentTarget&&this.close()}}])&&i(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFunction=t,n._inputContainer=n._popup.querySelector(".popup__input-container"),n._inputFields=n._inputContainer.querySelectorAll(".popup__input-field"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputFields.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"close",value:function(){s(d(u.prototype),"close",this).call(this),this._inputContainer.reset()}},{key:"setEventListeners",value:function(){var e=this;s(d(u.prototype),"setEventListeners",this).call(this),this._inputContainer.addEventListener("submit",(function(t){e._submitFunction(t,e._getInputValues())}))}}])&&a(t.prototype,n),u}(c);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(){return _(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e){var t=e.place,n=e.url;this._popup.querySelector(".fullscreen-popup__title").textContent=t,this._popup.querySelector(".fullscreen-popup__img").src=n,v(E(u.prototype),"open",this).call(this)}}])&&m(t.prototype,n),u}(c);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._items.forEach((function(t){e._renderer(t)}))}}])&&k(t.prototype,n),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n=t.name,r=t.about;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e,t){this._name.textContent=e,this._about.textContent=t}}])&&I(t.prototype,n),e}(),L=new g(e.fullscreenPopup);function C(t){var r=new n(t,e.cardTemplate,(function(){return L.open(t)})).getElement();P.addItem(r)}L.setEventListeners();var P=new w({items:[{place:"Архыз",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{place:"Челябинская область",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{place:"Иваново",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{place:"Камчатка",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{place:"Холмогорский район",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{place:"Байкал",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){C(e)}},e.cardAreaSelector);P.renderItems();var q=new O({name:".user__name",about:".user__about"});new o(e,e.userPopup).enableValidation();var j=new h(e.userPopup,(function(e,t){e.preventDefault(),q.setUserInfo(t.name,t.about),j.close()}));j.setEventListeners(),e.userEditBtn.addEventListener("click",(function(){var t=q.getUserInfo();e.popupNameInput.value=t.name,e.popupAboutInput.value=t.about,j.open()}));var A=new o(e,e.placePopup);A.enableValidation();var B=new h(e.placePopup,(function(e,t){e.preventDefault(),C(t),B.close()}));B.setEventListeners(),e.placeAddBtn.addEventListener("click",(function(){A.toggleButtonState(),B.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsInVzZXJFZGl0QnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGxhY2VBZGRCdG4iLCJ1c2VyUG9wdXAiLCJwbGFjZVBvcHVwIiwiZnVsbHNjcmVlblBvcHVwIiwicG9wdXBOYW1lSW5wdXQiLCJwb3B1cEFib3V0SW5wdXQiLCJjYXJkVGVtcGxhdGUiLCJwb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZSIsInBvcHVwSW5wdXRGaWVsZEVycm9yIiwicG9wdXBTdWJtaXRCdG5EaXNhYmxlZCIsImZvcm1JbnB1dFNlbGVjdG9yIiwiZm9ybVN1Ym1pdFNlbGVjdG9yIiwiY2FyZEFyZWFTZWxlY3RvciIsIkNhcmQiLCJkYXRhIiwic2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX3BsYWNlIiwicGxhY2UiLCJfdXJsIiwidXJsIiwiX3NlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUxpa2UiLCJfZ2V0VGVtcGxhdGUiLCJpbWciLCJpbm5lclRleHQiLCJzZXRBdHRyaWJ1dGUiLCJfc2V0TGlzdGVuZXJzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcyIsIl9wb3B1cElucHV0RmllbGRFcnJvciIsIl9wb3B1cFN1Ym1pdEJ0bkRpc2FibGVkIiwiX2Zvcm1JbnB1dFNlbGVjdG9yIiwiX2Zvcm1TdWJtaXRTZWxlY3RvciIsIl9pbnB1dEZpZWxkcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnRuIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJlcnJvcklucHV0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInRleHRDb250ZW50IiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldFZhbGlkYXRpb25FdmVudExpc3RlbmVycyIsImJvZHkiLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsIl9jbG9zZVBvcHVwQnlDbGlja09uT3ZlcmxheSIsImtleSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0RnVuY3Rpb24iLCJfc3VibWl0RnVuY3Rpb24iLCJfaW5wdXRDb250YWluZXIiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJzcmMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaW5uZXJIVE1MIiwiY2xlYXIiLCJpdGVtIiwiVXNlckluZm8iLCJhYm91dCIsIl9uYW1lIiwiX2Fib3V0IiwiZnVsbHNjcmVlblBvcHVwSW5zdGFuY2UiLCJjcmVhdGVDYXJkIiwib3BlbiIsImdldEVsZW1lbnQiLCJjYXJkc0xpc3QiLCJhZGRJdGVtIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW5kZXJJdGVtcyIsInVzZXJJbmZvIiwiRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJ1c2VyUG9wdXBJbnN0YW5jZSIsImlucHV0VmFsdWVzIiwic2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwicGxhY2VGb3JtVmFsaWRhdG9yIiwicGxhY2VQb3B1cEluc3RhbmNlIl0sIm1hcHBpbmdzIjoibUJBQU8sSUNBTUEsRUFBUyxDQUNwQkMsWUFBYUMsU0FBU0MsY0FBYyxtQkFDcENDLFlBQWFGLFNBQVNDLGNBQWMsa0JBRXBDRSxVQUFXSCxTQUFTQyxjQUFjLGVBQ2xDRyxXQUFZSixTQUFTQyxjQUFjLGdCQUNuQ0ksZ0JBQWlCTCxTQUFTQyxjQUFjLHFCQUV4Q0ssZUFBZ0JOLFNBQVNDLGNBQWMsNEJBQ3ZDTSxnQkFBaUJQLFNBQVNDLGNBQWMsNkJBRXhDTyxhQUFjLGlCQUVkQywyQkFBNEIsa0NBQzVCQyxxQkFBc0IsMkJBQ3RCQyx1QkFBd0IsNkJBRXhCQyxrQkFBbUIsc0JBQ25CQyxtQkFBb0IscUJBQ3BCQyxpQkFBa0IsZSwwS0NuQkNDLEUsV0FDbkIsV0FBWUMsRUFBTUMsRUFBVUMsSSw0RkFBaUIsU0FDM0NDLEtBQUtDLE9BQVNKLEVBQUtLLE1BQ25CRixLQUFLRyxLQUFPTixFQUFLTyxJQUNqQkosS0FBS0ssVUFBWVAsRUFDakJFLEtBQUtNLGlCQUFtQlAsRSw0REFJeEIsT0FBT2xCLFNBQVNDLGNBQWNrQixLQUFLSyxXQUFXRSxRQUFRQyxXQUFVLEdBQU0xQixjQUFjLFcsc0NBSXBGa0IsS0FBS1MsU0FBU0MsU0FDZFYsS0FBS1MsU0FBVyxPLG9DQUloQlQsS0FBS1MsU0FBUzNCLGNBQWMsb0JBQW9CNkIsVUFBVUMsT0FBTyw0QixzQ0FHbkQsV0FDZFosS0FBS1MsU0FBUzNCLGNBQWMsb0JBQW9CK0IsaUJBQWlCLFNBQVMsa0JBQU0sRUFBS0MsbUJBQ3JGZCxLQUFLUyxTQUFTM0IsY0FBYyxvQkFBb0IrQixpQkFBaUIsU0FBUyxrQkFBSyxFQUFLRSxpQkFDcEZmLEtBQUtTLFNBQVMzQixjQUFjLGNBQWMrQixpQkFBaUIsU0FBUyxrQkFBTSxFQUFLUCx3QixtQ0FJL0VOLEtBQUtTLFNBQVdULEtBQUtnQixlQUNyQixJQUFNQyxFQUFNakIsS0FBS1MsU0FBUzNCLGNBQWMsY0FReEMsT0FOQWtCLEtBQUtTLFNBQVMzQixjQUFjLGdCQUFnQm9DLFVBQVlsQixLQUFLQyxPQUM3RGdCLEVBQUlFLGFBQWEsTUFBT25CLEtBQUtHLE1BQzdCYyxFQUFJRSxhQUFhLE1BQU9uQixLQUFLQyxRQUU3QkQsS0FBS29CLGdCQUVFcEIsS0FBS1MsYyw0TEMrQ2hCLFEsV0FuRkUsV0FBYTlCLEVBQVEwQyxJLDRGQUFhLFNBQ2hDckIsS0FBS3NCLGFBQWVELEVBQ3BCckIsS0FBS3VCLDJCQUE2QjVDLEVBQU9XLDJCQUN6Q1UsS0FBS3dCLHNCQUF3QjdDLEVBQU9ZLHFCQUNwQ1MsS0FBS3lCLHdCQUEwQjlDLEVBQU9hLHVCQUN0Q1EsS0FBSzBCLG1CQUFxQi9DLEVBQU9jLGtCQUNqQ08sS0FBSzJCLG9CQUFzQmhELEVBQU9lLG1CQUNsQ00sS0FBSzRCLGFBQWVDLE1BQU1DLEtBQUtULEVBQVlVLGlCQUFpQnBELEVBQU9jLG9CQUNuRU8sS0FBS2dDLFdBQWFYLEVBQVl2QyxjQUFjSCxFQUFPZSxvQiw2REFJckN1QyxFQUFjQyxHQUM1QixJQUFNQyxFQUFlbkMsS0FBS3NCLGFBQWF4QyxjQUFsQixXQUFvQ21ELEVBQWFHLEdBQWpELFdBQ2ZDLEVBQWFGLEVBQWFHLHVCQUVoQ0gsRUFBYUksWUFBY0wsRUFDM0JDLEVBQWF4QixVQUFVNkIsSUFBSXhDLEtBQUt1Qiw0QkFDaENjLEVBQVcxQixVQUFVNkIsSUFBSXhDLEtBQUt3Qix5QixzQ0FJaEJTLEdBQ2QsSUFBTUUsRUFBZW5DLEtBQUtzQixhQUFheEMsY0FBbEIsV0FBb0NtRCxFQUFhRyxHQUFqRCxXQUNmQyxFQUFhRixFQUFhRyx1QkFFaENILEVBQWFJLFlBQWMsR0FDM0JKLEVBQWF4QixVQUFVRCxPQUFPVixLQUFLdUIsNEJBQ25DYyxFQUFXMUIsVUFBVUQsT0FBT1YsS0FBS3dCLHlCLDBDQUlmUyxHQUNiQSxFQUFhUSxTQUFTQyxNQUd6QjFDLEtBQUsyQyxnQkFBZ0JWLEdBRnJCakMsS0FBSzRDLGdCQUFnQlgsRUFBY0EsRUFBYVkscUIseUNBUWxELE9BQU83QyxLQUFLNEIsYUFBYWtCLE1BQUssU0FBQ2IsR0FBRCxPQUFtQkEsRUFBYVEsU0FBU0MsVywwQ0FLbkUxQyxLQUFLK0Msb0JBQ1AvQyxLQUFLZ0MsV0FBV3JCLFVBQVU2QixJQUFJeEMsS0FBS3lCLHlCQUNuQ3pCLEtBQUtnQyxXQUFXYixhQUFhLFlBQVksS0FFekNuQixLQUFLZ0MsV0FBV3JCLFVBQVVELE9BQU9WLEtBQUt5Qix5QkFDdEN6QixLQUFLZ0MsV0FBV2dCLGdCQUFnQixlLHFEQUtMLFdBQ3ZCQyxFQUFZcEIsTUFBTUMsS0FBSzlCLEtBQUtzQixhQUFhUyxpQkFBaUIvQixLQUFLMEIscUJBQy9Ed0IsRUFBZ0JsRCxLQUFLc0IsYUFBYXhDLGNBQWNrQixLQUFLMkIscUJBRTNEc0IsRUFBVUUsU0FBUSxTQUFDbEIsR0FDakJBLEVBQWFwQixpQkFBaUIsU0FBUyxXQUNyQyxFQUFLdUMsb0JBQW9CbkIsR0FDekIsRUFBS29CLGtCQUFrQkosRUFBV0MsU0FJdENsRCxLQUFLcUQsa0JBQWtCSixFQUFXQyxLLHlDQU9sQ2xELEtBQUtzQixhQUFhVCxpQkFBaUIsVUFIVixTQUFDeUMsR0FDeEJBLEVBQUlDLG9CQUlOdkQsS0FBS3dELG9DLDRMQzlFVCxJQUFNQyxFQUFPNUUsU0FBU0MsY0FBYyxTQUVmNEUsRSxXQUNuQixXQUFZQyxJLDRGQUFPLFNBQ2pCM0QsS0FBSzRELE9BQVNELEVBQ2QzRCxLQUFLNkQsZ0JBQWtCN0QsS0FBSzZELGdCQUFnQkMsS0FBSzlELE0sb0RBSWpEeUQsRUFBSzlDLFVBQVU2QixJQUFJLGlCQUNuQnhDLEtBQUs0RCxPQUFPakQsVUFBVTZCLElBQUksZ0JBQzFCM0QsU0FBU2dDLGlCQUFpQixVQUFXYixLQUFLNkQsbUIsOEJBSTFDN0QsS0FBSzRELE9BQU9qRCxVQUFVRCxPQUFPLGdCQUM3QitDLEVBQUs5QyxVQUFVRCxPQUFPLGlCQUN0QjdCLFNBQVNrRixvQkFBb0IsVUFBVy9ELEtBQUs2RCxtQiwwQ0FHM0IsV0FDbEI3RCxLQUFLNEQsT0FBTzlFLGNBQWMscUJBQXFCK0IsaUJBQWlCLFNBQVMsa0JBQU0sRUFBS21ELFdBQ3BGaEUsS0FBSzRELE9BQU8vQyxpQkFBaUIsU0FBUyxTQUFDeUMsR0FBUyxFQUFLVyw0QkFBNEJYLFEsc0NBR25FQSxHQUNFLFdBQVpBLEVBQUlZLEtBQ05sRSxLQUFLZ0UsVSxrREFJbUJWLEdBQ3RCQSxFQUFJYSxTQUFXYixFQUFJYyxlQUd2QnBFLEtBQUtnRSxhLHdtQ0NqQ1lLLEUsa3BCQUNuQixXQUFZVixFQUFPVyxHQUFnQixhLDRGQUFBLFVBQ2pDLGNBQU1YLElBQ0RZLGdCQUFrQkQsRUFDdkIsRUFBS0UsZ0JBQWtCLEVBQUtaLE9BQU85RSxjQUFjLDJCQUNqRCxFQUFLOEMsYUFBZSxFQUFLNEMsZ0JBQWdCekMsaUJBQWlCLHVCQUp6QixFLHVEQU9qQixXQUdoQixPQUZBL0IsS0FBS3lFLGFBQWUsR0FDcEJ6RSxLQUFLNEIsYUFBYXVCLFNBQVEsU0FBQ3VCLEdBQVcsRUFBS0QsYUFBYUMsRUFBTUMsTUFBUUQsRUFBTUUsU0FDckU1RSxLQUFLeUUsZSw4QkFJWiwwQ0FDQXpFLEtBQUt3RSxnQkFBZ0JLLFUsMENBR0gsV0FDbEIsc0RBQ0E3RSxLQUFLd0UsZ0JBQWdCM0QsaUJBQWlCLFVBQVUsU0FBQ3lDLEdBQVMsRUFBS2lCLGdCQUFnQmpCLEVBQUssRUFBS3dCLDJCLG9CQXJCbERwQixHLGdyQ0NBdEJxQixFLHF2QkFDQSxJQUFiN0UsRUFBYSxFQUFiQSxNQUFPRSxFQUFNLEVBQU5BLElBQ1hKLEtBQUs0RCxPQUFPOUUsY0FBYyw0QkFBNEJ5RCxZQUFjckMsRUFDcEVGLEtBQUs0RCxPQUFPOUUsY0FBYywwQkFBMEJrRyxJQUFNNUUsRUFDMUQsOEMsb0JBSndDc0QsRywwS0NGdkJ1QixFLFdBQ25CLGFBQStCQyxHQUFrQixJQUFwQ0MsRUFBb0MsRUFBcENBLE1BQU9DLEVBQTZCLEVBQTdCQSxVLDRGQUE2QixTQUMvQ3BGLEtBQUtxRixPQUFTRixFQUNkbkYsS0FBS3NGLFVBQVlGLEVBQ2pCcEYsS0FBS3VGLFdBQWExRyxTQUFTQyxjQUFjb0csRyxxREFHbkNNLEdBQ054RixLQUFLdUYsV0FBV0UsUUFBUUQsSyw4QkFJeEJ4RixLQUFLdUYsV0FBV0csVUFBWSxLLG9DQUdoQixXQUNaMUYsS0FBSzJGLFFBQ0wzRixLQUFLcUYsT0FBT2xDLFNBQVEsU0FBQXlDLEdBQVMsRUFBS04sVUFBVU0sVyxnTUNqQjNCQyxFLFdBQ25CLGNBQTJCLElBQWRsQixFQUFjLEVBQWRBLEtBQU1tQixFQUFRLEVBQVJBLE8sNEZBQVEsU0FDekI5RixLQUFLK0YsTUFBUWxILFNBQVNDLGNBQWM2RixHQUNwQzNFLEtBQUtnRyxPQUFTbkgsU0FBU0MsY0FBY2dILEcsMkRBSXJDLE1BQU8sQ0FBQ25CLEtBQU0zRSxLQUFLK0YsTUFBTXhELFlBQWF1RCxNQUFPOUYsS0FBS2dHLE9BQU96RCxlLGtDQUcvQ29DLEVBQU1tQixHQUNoQjlGLEtBQUsrRixNQUFNeEQsWUFBY29DLEVBQ3pCM0UsS0FBS2dHLE9BQU96RCxZQUFjdUQsTyxzQkNEeEJHLEVBQTBCLElBQUlsQixFQUFlcEcsRUFBT08saUJBRzFELFNBQVNnSCxFQUFZTixHQUNuQixJQUNRSixFQURLLElBQUk1RixFQUFLZ0csRUFBTWpILEVBQU9VLGNBQWMsa0JBQU00RyxFQUF3QkUsS0FBS1AsTUFDN0RRLGFBQ3JCQyxFQUFVQyxRQUFRZCxHQUx0QlMsRUFBd0JNLG9CQVF4QixJQUFNRixFQUFZLElBQUlwQixFQUFRLENBQzVCRSxNVHJCMEIsQ0FDMUIsQ0FDRWpGLE1BQU8sUUFDUEUsSUFBSyxpRkFFUCxDQUNFRixNQUFPLHNCQUNQRSxJQUFLLDZGQUVQLENBQ0VGLE1BQU8sVUFDUEUsSUFBSyxrRkFFUCxDQUNFRixNQUFPLFdBQ1BFLElBQUssb0ZBRVAsQ0FDRUYsTUFBTyxxQkFDUEUsSUFBSyw2RkFFUCxDQUNFRixNQUFPLFNBQ1BFLElBQUssa0ZTRFBnRixTQUFVLFNBQUFRLEdBQVNNLEVBQVdOLEtBQzlCakgsRUFBT2dCLGtCQUdUMEcsRUFBVUcsY0FHVixJQUFNQyxFQUFXLElBQUlaLEVBQVMsQ0FBQ2xCLEtBQU0sY0FBZW1CLE1BQU8saUJBQ2pDLElBQUlZLEVBQWMvSCxFQUFRQSxFQUFPSyxXQUN6QzJILG1CQUdsQixJQUFNQyxFQUFvQixJQUFJdkMsRUFBYzFGLEVBQU9LLFdBQVcsU0FBQ3NFLEVBQUt1RCxHQUNsRXZELEVBQUlDLGlCQUVKa0QsRUFBU0ssWUFBWUQsRUFBWWxDLEtBQU1rQyxFQUFZZixPQUNuRGMsRUFBa0I1QyxXQUdwQjRDLEVBQWtCTCxvQkFTbEI1SCxFQUFPQyxZQUFZaUMsaUJBQWlCLFNBUHBDLFdBQ0UsSUFBTWtHLEVBQVdOLEVBQVNPLGNBQzFCckksdUJBQThCb0ksRUFBU3BDLEtBQ3ZDaEcsd0JBQStCb0ksRUFBU2pCLE1BQ3hDYyxFQUFrQlQsVUFNcEIsSUFBTWMsRUFBcUIsSUFBSVAsRUFBYy9ILEVBQVFBLEVBQU9NLFlBQzVEZ0ksRUFBbUJOLG1CQUVuQixJQUFNTyxFQUFxQixJQUFJN0MsRUFBYzFGLEVBQU9NLFlBQVksU0FBQ3FFLEVBQUt1RCxHQUNwRXZELEVBQUlDLGlCQUVKMkMsRUFBV1csR0FDWEssRUFBbUJsRCxXQUdyQmtELEVBQW1CWCxvQkFPbkI1SCxFQUFPSSxZQUFZOEIsaUJBQWlCLFNBTHBDLFdBQ0VvRyxFQUFtQjVELG9CQUNuQjZELEVBQW1CZixXIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgcGxhY2U6ICfQkNGA0YXRi9C3JyxcbiAgICB1cmw6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgfSxcbiAge1xuICAgIHBsYWNlOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICB1cmw6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgIHVybDogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICB9LFxuICB7XG4gICAgcGxhY2U6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogJ9CR0LDQudC60LDQuycsXG4gICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnLFxuICB9XG5dOyIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHVzZXJFZGl0QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fZWRpdC1idG4nKSwgLy8g0JrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LjQvdGE0L7QvdC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIHBsYWNlQWRkQnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fYWRkLWJ0bicpLCAvLyDQmtC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuXG4gIHVzZXJQb3B1cDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3VzZXInKSwgLy8g0J/QvtC/0LDQvyBVc2VyXG4gIHBsYWNlUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9wbGFjZScpLCAvLyDQn9C+0L/QsNC/IFBsYWNlXG4gIGZ1bGxzY3JlZW5Qb3B1cDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZ1bGxzY3JlZW4tcG9wdXAnKSwgLy8g0KTRg9C70LvRgdC60YDQuNC9INC/0L7Qv9Cw0L9cblxuICBwb3B1cE5hbWVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dC1maWVsZF9uYW1lJyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvNC10L3QuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgcG9wdXBBYm91dElucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0LWZpZWxkX2Fib3V0JyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIFxuICBjYXJkVGVtcGxhdGU6ICcuY2FyZC10ZW1wbGF0ZScsXG5cbiAgcG9wdXBJbnB1dEZpZWxkRXJyb3JBY3RpdmU6ICdwb3B1cF9faW5wdXQtZmllbGQtZXJyb3JfYWN0aXZlJyxcbiAgcG9wdXBJbnB1dEZpZWxkRXJyb3I6ICdwb3B1cF9faW5wdXQtZmllbGRfZXJyb3InLFxuICBwb3B1cFN1Ym1pdEJ0bkRpc2FibGVkOiAncG9wdXBfX3N1Ym1pdC1idG5fZGlzYWJsZWQnLFxuXG4gIGZvcm1JbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dC1maWVsZCcsXG4gIGZvcm1TdWJtaXRTZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ0bicsXG4gIGNhcmRBcmVhU2VsZWN0b3I6ICcuY2FyZC1pdGVtcycsXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9wbGFjZSA9IGRhdGEucGxhY2VcbiAgICB0aGlzLl91cmwgPSBkYXRhLnVybFxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2tcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkucXVlcnlTZWxlY3RvcignLmNhcmQnKVxuICB9XG5cbiAgX2hhbmRsZURlbGV0ZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGxcbiAgfVxuXG4gIF9oYW5kbGVMaWtlKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYXJ0LWJ0bicpLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2hlYXJ0LWJ0bl9hY3RpdmUnKVxuICB9XG5cbiAgX3NldExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZSgpKVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYXJ0LWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB0aGlzLl9oYW5kbGVMaWtlKCkpXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1nJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKSlcbiAgfVxuXG4gIGdldEVsZW1lbnQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgY29uc3QgaW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1nJylcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJykuaW5uZXJUZXh0ID0gdGhpcy5fcGxhY2U7XG4gICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fdXJsKTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdhbHQnLCB0aGlzLl9wbGFjZSk7XG5cbiAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XG4gIH1cbn0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50XG4gICAgdGhpcy5fZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcyA9IGNvbmZpZy5wb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZVxuICAgIHRoaXMuX3BvcHVwSW5wdXRGaWVsZEVycm9yID0gY29uZmlnLnBvcHVwSW5wdXRGaWVsZEVycm9yXG4gICAgdGhpcy5fcG9wdXBTdWJtaXRCdG5EaXNhYmxlZCA9IGNvbmZpZy5wb3B1cFN1Ym1pdEJ0bkRpc2FibGVkXG4gICAgdGhpcy5fZm9ybUlucHV0U2VsZWN0b3IgPSBjb25maWcuZm9ybUlucHV0U2VsZWN0b3JcbiAgICB0aGlzLl9mb3JtU3VibWl0U2VsZWN0b3IgPSBjb25maWcuZm9ybVN1Ym1pdFNlbGVjdG9yXG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1JbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVN1Ym1pdFNlbGVjdG9yKTtcbiAgfVxuXG4gICAgLy8g0J/QvtC60LDQt9Cw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgY29uc3QgZXJyb3JJbnB1dCA9IGVycm9yRWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG5cbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2VcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzKVxuICAgIGVycm9ySW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9wb3B1cElucHV0RmllbGRFcnJvcilcbiAgfVxuXG4gIC8vINCh0LrRgNGL0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgIGNvbnN0IGVycm9ySW5wdXQgPSBlcnJvckVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZ1xuXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJydcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzKVxuICAgIGVycm9ySW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9wb3B1cElucHV0RmllbGRFcnJvcilcbiAgfVxuXG4gIC8vINCk0YPQvdC60YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgIH1cbiAgfVxuXG4gIC8vINCf0YDQvtCy0LXRgNC60LAg0L3QsCDQvdCw0LvQuNGH0LjQtSDQvdC10LLQsNC70LjQtNC90L7Qs9C+INC/0L7Qu9GPIFxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEZpZWxkcy5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpXG4gIH1cblxuICAvLyDQmNC30LzQtdC90LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQpXG4gICAgICB0aGlzLl9zdWJtaXRCdG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQpXG4gICAgICB0aGlzLl9zdWJtaXRCdG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgfVxuICB9XG5cbiAgLy8gTGlzdGVuZXJzXG4gIF9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1JbnB1dFNlbGVjdG9yKSlcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU3VibWl0U2VsZWN0b3IpXG5cbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUZvcm1TdWJtaXQpXG5cbiAgICB0aGlzLl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKVxuICB9XG5cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yIiwiY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2R5JylcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcylcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdib2R5X25vc2Nyb2xsJylcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpXG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5X25vc2Nyb2xsJylcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge3RoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KGV2dCl9KVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0ICE9PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBzdWJtaXRGdW5jdGlvbikge1xuICAgIHN1cGVyKHBvcHVwKVxuICAgIHRoaXMuX3N1Ym1pdEZ1bmN0aW9uID0gc3VibWl0RnVuY3Rpb25cbiAgICB0aGlzLl9pbnB1dENvbnRhaW5lciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXQtY29udGFpbmVyJylcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IHRoaXMuX2lucHV0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQtZmllbGQnKVxuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge31cbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dCkgPT4ge3RoaXMuX2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWV9KVxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlc1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKVxuICAgIHRoaXMuX2lucHV0Q29udGFpbmVyLnJlc2V0KClcbiAgfVxuICBcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2lucHV0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHt0aGlzLl9zdWJtaXRGdW5jdGlvbihldnQsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpfSlcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbih7cGxhY2UsIHVybH0pIHtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZnVsbHNjcmVlbi1wb3B1cF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHBsYWNlO1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mdWxsc2NyZWVuLXBvcHVwX19pbWcnKS5zcmMgPSB1cmw7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcil7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtc1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKVxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudClcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5jbGVhcigpXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IHt0aGlzLl9yZW5kZXJlcihpdGVtKX0pXG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lLCBhYm91dH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKVxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dClcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7bmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50fVxuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZVxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXRcbiAgfVxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnXG5pbXBvcnQge2luaXRpYWxDYXJkc30gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xuaW1wb3J0IHtjb25maWd9IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJ1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJ1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJ1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJ1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcydcblxuLy9DYXJkcyArIEZ1bGxzY3JlZW4gUG9wdXBcbmNvbnN0IGZ1bGxzY3JlZW5Qb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEltYWdlKGNvbmZpZy5mdWxsc2NyZWVuUG9wdXApXG5mdWxsc2NyZWVuUG9wdXBJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQgKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIGNvbmZpZy5jYXJkVGVtcGxhdGUsICgpID0+IGZ1bGxzY3JlZW5Qb3B1cEluc3RhbmNlLm9wZW4oaXRlbSkpXG4gICAgY29uc3QgZWxlbWVudCA9IGNhcmQuZ2V0RWxlbWVudCgpXG4gICAgY2FyZHNMaXN0LmFkZEl0ZW0oZWxlbWVudClcbn1cblxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogaW5pdGlhbENhcmRzLFxuICByZW5kZXJlcjogaXRlbSA9PiB7Y3JlYXRlQ2FyZChpdGVtKX19LFxuICBjb25maWcuY2FyZEFyZWFTZWxlY3RvclxuKVxuXG5jYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcblxuLy91c2VyIFBvcHVwXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7bmFtZTogJy51c2VyX19uYW1lJywgYWJvdXQ6ICcudXNlcl9fYWJvdXQnfSlcbmNvbnN0IHVzZXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjb25maWcudXNlclBvcHVwKVxudXNlckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cblxuY29uc3QgdXNlclBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcudXNlclBvcHVwLCAoZXZ0LCBpbnB1dFZhbHVlcykgPT57XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMubmFtZSwgaW5wdXRWYWx1ZXMuYWJvdXQpXG4gIHVzZXJQb3B1cEluc3RhbmNlLmNsb3NlKClcbn0pXG5cbnVzZXJQb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKClcblxuZnVuY3Rpb24gaGFuZGxlVXNlclBvcHVwQnRuKCkge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcbiAgY29uZmlnLnBvcHVwTmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZVxuICBjb25maWcucG9wdXBBYm91dElucHV0LnZhbHVlID0gdXNlckRhdGEuYWJvdXRcbiAgdXNlclBvcHVwSW5zdGFuY2Uub3BlbigpXG59XG5cbmNvbmZpZy51c2VyRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVVzZXJQb3B1cEJ0bilcblxuLy9wbGFjZSBQb3B1cFxuY29uc3QgcGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjb25maWcucGxhY2VQb3B1cClcbnBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcblxuY29uc3QgcGxhY2VQb3B1cEluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uZmlnLnBsYWNlUG9wdXAsIChldnQsIGlucHV0VmFsdWVzKSA9PntcbiAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgXG4gIGNyZWF0ZUNhcmQoaW5wdXRWYWx1ZXMpXG4gIHBsYWNlUG9wdXBJbnN0YW5jZS5jbG9zZSgpXG59KVxuXG5wbGFjZVBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5mdW5jdGlvbiBoYW5kbGVQbGFjZVBvcHVwQnRuKCkge1xuICBwbGFjZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICBwbGFjZVBvcHVwSW5zdGFuY2Uub3BlbigpXG59XG5cbmNvbmZpZy5wbGFjZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVBsYWNlUG9wdXBCdG4pIl0sInNvdXJjZVJvb3QiOiIifQ==