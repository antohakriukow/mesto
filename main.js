(()=>{"use strict";var e={userEditBtn:document.querySelector(".user__edit-btn"),placeAddBtn:document.querySelector(".user__add-btn"),changeAvatarBtn:document.querySelector(".user__overlay"),userPopup:document.querySelector(".popup_user"),placePopup:document.querySelector(".popup_place"),fullscreenPopup:document.querySelector(".fullscreen-popup"),deleteAlertPopup:document.querySelector(".popup_delete-alert"),avatarPopup:document.querySelector(".popup_avatar"),popupNameInput:document.querySelector(".popup__input-field_name"),popupAboutInput:document.querySelector(".popup__input-field_about"),popupAvatarInput:document.querySelector(".popup__input-field_avatar"),smartSubmitters:document.querySelectorAll(".js-smartSubmitter"),cardTemplate:".card-template",popupInputFieldErrorActive:"popup__input-field-error_active",popupInputFieldError:"popup__input-field_error",popupSubmitBtnDisabled:"popup__submit-btn_disabled",formInputSelector:".popup__input-field",formSubmitSelector:".popup__submit-btn",cardAreaSelector:".card-items",mestoUrl:"https://mesto.nomoreparties.co/v1",mestoCohortId:"cohort-17",mestoToken:"c13b61bb-48e3-443e-a9a7-26bfb3cb5657"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headers=t.headers,this.url=t.url}var n,r;return n=e,(r=[{key:"getCheckedResponse",value:function(e){return e.ok?e.json():Promise.reject("Sorry, something went wrong. Error: ".concat(e.status))}},{key:"getUserData",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:this.headers}).then(this.getCheckedResponse)}},{key:"setUserData",value:function(e){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this.getCheckedResponse)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then(this.getCheckedResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers}).then(this.getCheckedResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this.getCheckedResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then(this.getCheckedResponse)}},{key:"likeCard",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then(this.getCheckedResponse)}},{key:"dislikeCard",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then(this.getCheckedResponse)}}])&&t(n.prototype,r),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._place=t.name,this._url=t.link,this._cardId=t._id,this._cardOwnerId=t.owner._id,this._likeQuanity=t.likes.length,this._likes=t.likes,this._userId=i,this._selector=n,this._handleCardClick=r.handleCardClick,this._setLike=r.setLike,this._removeLike=r.removeLike,this._handleCardRemove=r.handleCardRemove,this._handleDeleteButtonClick=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0).querySelector(".card")}},{key:"getIdForDelete",value:function(e){return"id for delete = ".concat(e.path[2].id)}},{key:"handleDelete",value:function(){this._element.remove(),this._element=null}},{key:"_handleLike",value:function(){var e=this;void 0===this._likes.find((function(t){return t._id==e._userId}))?this._setLike(this._element.id).then((function(t){e._element.querySelector(".card__like-counter").innerText=t.likes.length,e._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active"),e._likes=t.likes})):this._removeLike(this._element.id).then((function(t){e._element.querySelector(".card__like-counter").innerText=t.likes.length,e._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active"),e._likes=t.likes}))}},{key:"_setListeners",value:function(){var e=this;null!==this._cardDeleteBtn&&this._element.querySelector(".card__trash-btn").addEventListener("click",(function(){e._handleDeleteButtonClick(e)})),this._element.querySelector(".card__heart-btn").addEventListener("click",(function(){return e._handleLike()})),this._element.querySelector(".card__img").addEventListener("click",(function(){return e._handleCardClick(e._place,e._url)}))}},{key:"getElement",value:function(){var e=this;this._element=this._getTemplate(),this._cardDeleteBtn=this._element.querySelector(".card__trash-btn");var t=this._element.querySelector(".card__img");return this._element.querySelector(".card__title").innerText=this._place,t.setAttribute("src",this._url),t.setAttribute("alt",this._place),this._element.setAttribute("id",this._cardId),this._element.querySelector(".card__like-counter").innerText=this._likeQuanity,this._userId!==this._cardOwnerId&&(this._cardDeleteBtn.remove(),this._cardDeleteBtn=null),void 0!==this._likes.find((function(t){return t._id==e._userId}))&&this._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active"),this._setListeners(),this._element}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._formInputErrorActiveClass=t.popupInputFieldErrorActive,this._popupInputFieldError=t.popupInputFieldError,this._popupSubmitBtnDisabled=t.popupSubmitBtnDisabled,this._formInputSelector=t.formInputSelector,this._formSubmitSelector=t.formSubmitSelector,this._inputFields=Array.from(n.querySelectorAll(t.formInputSelector)),this._submitBtn=n.querySelector(t.formSubmitSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error")),r=n.previousElementSibling;n.textContent=t,n.classList.add(this._formInputErrorActiveClass),r.classList.add(this._popupInputFieldError)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error")),n=t.previousElementSibling;t.textContent="",t.classList.remove(this._formInputErrorActiveClass),n.classList.remove(this._popupInputFieldError)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputFields.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitBtn.classList.add(this._popupSubmitBtnDisabled),this._submitBtn.setAttribute("disabled",!0)):(this._submitBtn.classList.remove(this._popupSubmitBtnDisabled),this._submitBtn.removeAttribute("disabled"))}},{key:"_setValidationEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._formInputSelector)),n=this._formElement.querySelector(this._formSubmitSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e.toggleButtonState(t,n)}))})),this.toggleButtonState(t,n)}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setValidationEventListeners()}}])&&i(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=document.querySelector(".body"),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){c.classList.add("body_noscroll"),this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),c.classList.remove("body_noscroll"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()})),this._popup.addEventListener("click",(function(t){e._closePopupByClickOnOverlay(t)}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closePopupByClickOnOverlay",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"showButton",value:function(){console.log(this._popup.querySelector(".popup__submit-btn").textContent)}}])&&a(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFunction=t,n._inputContainer=n._popup.querySelector(".popup__input-container"),n._inputFields=n._inputContainer.querySelectorAll(".popup__input-field"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputFields.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"close",value:function(){f(_(u.prototype),"close",this).call(this),this._inputContainer.reset()}},{key:"setEventListeners",value:function(){var e=this;f(_(u.prototype),"setEventListeners",this).call(this),this._inputContainer.addEventListener("submit",(function(t){e._submitFunction(t,e._getInputValues())}))}}])&&p(t.prototype,n),u}(s);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(){return m(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e,t){this._popup.querySelector(".fullscreen-popup__title").textContent=e,this._popup.querySelector(".fullscreen-popup__img").src=t,k(E(u.prototype),"open",this).call(this)}}])&&b(t.prototype,n),u}(s);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.reverse().forEach((function(e){t._renderer(e)}))}}])&&C(t.prototype,n),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"getuserAvatar",value:function(){return this._avatar.src}},{key:"setUserInfo",value:function(e,t){this._name.textContent=e,this._about.textContent=t}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}}])&&I(t.prototype,n),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B={handleCardClick:function(e,t){return J.open(e,t)},renderCards:function(){V.getInitialCards().then((function(e){return N.renderItems(e)})).catch((function(e){return console.log(e)}))},addNewCard:function(e,t){e.preventDefault();var n={name:t.place,link:t.url};V.addCard(n).then((function(e){U(e),Q.close()})).catch((function(e){return console.log(e)}))},setLike:function(e){return V.likeCard(e).catch((function(e){return e}))},removeLike:function(e){return V.dislikeCard(e).catch((function(e){return e}))},showAlertPopup:function(){return F.open()},handlePlacePopupBtn:function(){z.toggleButtonState(),Q.open()}};function T(t){t?Array.from(e.smartSubmitters).forEach((function(e){e.value="Сохранение..."})):Array.from(e.smartSubmitters).forEach((function(e){e.value="Сохранить"}))}var F=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._deleteSubmitter=t._popup.querySelector(".js-delete_submitter"),t.submitFunction=null,t}return t=u,(n=[{key:"setSubmitFunction",value:function(e){this.submitFunction=e}},{key:"setEventListeners",value:function(){var e=this;A(D(u.prototype),"setEventListeners",this).call(this),this._deleteSubmitter.addEventListener("click",(function(t){t.preventDefault(),e.submitFunction()}))}}])&&q(t.prototype,n),u}(s))(e.deleteAlertPopup);function x(e){F.open(),F.setSubmitFunction((function(){V.removeCard(e._cardId).then((function(){e.handleDelete(),F.close()}))}))}F.setEventListeners();var U=function(t){var n=new o(t,e.cardTemplate,B,x,W).getElement();N.addItem(n)},V=new n({url:"".concat(e.mestoUrl,"/").concat(e.mestoCohortId),headers:{"Content-Type":"application/json",authorization:e.mestoToken}}),N=new O({items:V.getInitialCards().then((function(e){return e})),renderer:function(e){U(e)}},e.cardAreaSelector),H=new P({name:".user__name",about:".user__about",avatar:".user__photo"});new u(e,e.userPopup).enableValidation();var J=new w(e.fullscreenPopup);J.setEventListeners();var M=new y(e.userPopup,(function(e,t){e.preventDefault(),T(!0),V.setUserData(t).then((function(e){H.setUserInfo(e.name,e.about),M.close()})).catch((function(e){return console.log(e)})).finally((function(){return T(!1)}))}));M.setEventListeners();var Q=new y(e.placePopup,B.addNewCard);Q.setEventListeners();var z=new u(e,e.placePopup);z.enableValidation();var G=new y(e.avatarPopup,(function(e,t){e.preventDefault(),T(!0),V.setUserAvatar(t).then((function(e){H.setUserAvatar(e.avatar),G.close()})).catch((function(e){return console.log(e)})).finally((function(){return T(!1)}))}));G.setEventListeners();var K=new u(e,e.avatarPopup);K.enableValidation(),e.userEditBtn.addEventListener("click",(function(){var t=H.getUserInfo();e.popupNameInput.value=t.name,e.popupAboutInput.value=t.about,M.open()})),e.placeAddBtn.addEventListener("click",B.handlePlacePopupBtn),e.changeAvatarBtn.addEventListener("click",(function(){var t=H.getuserAvatar();e.popupAvatarInput.value=t,K.toggleButtonState(),G.open()}));var W="";V.getUserData().then((function(e){return W=e._id})).catch((function(e){return console.log(e)})),B.renderCards(),V.getUserData().then((function(e){H.setUserInfo(e.name,e.about),H.setUserAvatar(e.avatar)})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhCdG4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwidXNlckVkaXRCdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwbGFjZUFkZEJ0biIsImNoYW5nZUF2YXRhckJ0biIsInVzZXJQb3B1cCIsInBsYWNlUG9wdXAiLCJmdWxsc2NyZWVuUG9wdXAiLCJkZWxldGVBbGVydFBvcHVwIiwiYXZhdGFyUG9wdXAiLCJwb3B1cE5hbWVJbnB1dCIsInBvcHVwQWJvdXRJbnB1dCIsInBvcHVwQXZhdGFySW5wdXQiLCJzbWFydFN1Ym1pdHRlcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FyZFRlbXBsYXRlIiwicG9wdXBJbnB1dEZpZWxkRXJyb3JBY3RpdmUiLCJwb3B1cElucHV0RmllbGRFcnJvciIsInBvcHVwU3VibWl0QnRuRGlzYWJsZWQiLCJmb3JtSW5wdXRTZWxlY3RvciIsImZvcm1TdWJtaXRTZWxlY3RvciIsImNhcmRBcmVhU2VsZWN0b3IiLCJtZXN0b1VybCIsIm1lc3RvQ29ob3J0SWQiLCJtZXN0b1Rva2VuIiwiQXBpIiwib3B0aW9ucyIsInRoaXMiLCJoZWFkZXJzIiwidXJsIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsImdldENoZWNrZWRSZXNwb25zZSIsInVzZXIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJhYm91dCIsImF2YXRhciIsImNhcmQiLCJsaW5rIiwiaWQiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwiY2FyZE9wdGlvbnMiLCJoYW5kbGVEZWxldGVCdXR0b25DbGljayIsInVzZXJJZCIsIl9wbGFjZSIsIl91cmwiLCJfY2FyZElkIiwiX2lkIiwiX2NhcmRPd25lcklkIiwib3duZXIiLCJfbGlrZVF1YW5pdHkiLCJsaWtlcyIsImxlbmd0aCIsIl9saWtlcyIsIl91c2VySWQiLCJfc2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3NldExpa2UiLCJzZXRMaWtlIiwiX3JlbW92ZUxpa2UiLCJyZW1vdmVMaWtlIiwiX2hhbmRsZUNhcmRSZW1vdmUiLCJoYW5kbGVDYXJkUmVtb3ZlIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2dCIsInBhdGgiLCJfZWxlbWVudCIsInJlbW92ZSIsInVuZGVmaW5lZCIsImZpbmQiLCJlbCIsImlubmVyVGV4dCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRGVsZXRlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2dldFRlbXBsYXRlIiwiaW1nIiwic2V0QXR0cmlidXRlIiwiX3NldExpc3RlbmVycyIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2Zvcm1JbnB1dEVycm9yQWN0aXZlQ2xhc3MiLCJfcG9wdXBJbnB1dEZpZWxkRXJyb3IiLCJfcG9wdXBTdWJtaXRCdG5EaXNhYmxlZCIsIl9mb3JtSW5wdXRTZWxlY3RvciIsIl9mb3JtU3VibWl0U2VsZWN0b3IiLCJfaW5wdXRGaWVsZHMiLCJBcnJheSIsImZyb20iLCJfc3VibWl0QnRuIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiZXJyb3JJbnB1dCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsImFkZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsIl9jbG9zZVBvcHVwQnlDbGlja09uT3ZlcmxheSIsImtleSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb25zb2xlIiwibG9nIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEZ1bmN0aW9uIiwiX3N1Ym1pdEZ1bmN0aW9uIiwiX2lucHV0Q29udGFpbmVyIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJzcmMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaW5uZXJIVE1MIiwiY2xlYXIiLCJyZXZlcnNlIiwiaXRlbSIsIlVzZXJJbmZvIiwiX25hbWUiLCJfYWJvdXQiLCJfYXZhdGFyIiwiZnVsbHNjcmVlblBvcHVwSW5zdGFuY2UiLCJvcGVuIiwicmVuZGVyQ2FyZHMiLCJhcGkiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkc0xpc3QiLCJyZW5kZXJJdGVtcyIsImVyciIsImFkZE5ld0NhcmQiLCJpbnB1dFZhbHVlcyIsInBsYWNlIiwiYWRkQ2FyZCIsImNyZWF0ZUNhcmQiLCJwbGFjZVBvcHVwSW5zdGFuY2UiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwic2hvd0FsZXJ0UG9wdXAiLCJwb3B1cHdpdGhCdG5JbnN0YW5jZSIsImhhbmRsZVBsYWNlUG9wdXBCdG4iLCJwbGFjZUZvcm1WYWxpZGF0b3IiLCJzaG93UHJvY2Vzc2luZyIsInByb2Nlc3NpbmciLCJzdWJtaXQiLCJfZGVsZXRlU3VibWl0dGVyIiwic2V0U3VibWl0RnVuY3Rpb24iLCJyZW1vdmVDYXJkIiwiaGFuZGxlRGVsZXRlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRFbGVtZW50IiwiYWRkSXRlbSIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsIkZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwidXNlclBvcHVwSW5zdGFuY2UiLCJzZXRVc2VyRGF0YSIsInNldFVzZXJJbmZvIiwiUG9wdXBXaXRoQXZhdGFySW5zdGFuY2UiLCJpbnB1dFZhbHVlIiwic2V0VXNlckF2YXRhciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwidXNlckF2YXRhciIsImdldHVzZXJBdmF0YXIiLCJnZXRVc2VyRGF0YSJdLCJtYXBwaW5ncyI6Im1CQUFPLElBQU1BLEVBQVMsQ0FDcEJDLFlBQWFDLFNBQVNDLGNBQWMsbUJBQ3BDQyxZQUFhRixTQUFTQyxjQUFjLGtCQUNwQ0UsZ0JBQWlCSCxTQUFTQyxjQUFjLGtCQUV4Q0csVUFBV0osU0FBU0MsY0FBYyxl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RDdMLEVBQU9LLGdCQUFnQnNGLGlCQUFpQixTQS9FckIsV0FDZixJQUFNMkgsRUFBYVosRUFBU2EsZ0JBQzVCdk4seUJBQWdDc04sRUFDaENILEVBQW9CcEYsb0JBQ3BCaUYsRUFBd0JwQyxVQThFNUIsSUFBSXBILEVBQVMsR0E3SE1zSCxFQUFJMEMsY0FDbEJsTCxNQUFLLFNBQUNjLEdBQUQsT0FBVUksRUFBU0osRUFBS1EsT0FEZixPQUVSLFNBQUNzSCxHQUFELE9BQVNyQyxRQUFRQyxJQUFJb0MsTUE2SGhDNUgsRUFBWXVILGNBM0hLQyxFQUFJMEMsY0FDaEJsTCxNQUFLLFNBQUNjLEdBQ0xzSixFQUFTSyxZQUFZM0osRUFBS1AsS0FBTU8sRUFBS04sT0FDckM0SixFQUFTUSxjQUFjOUosRUFBS0wsV0FIakIsT0FLTixTQUFDbUksR0FBRCxPQUFTckMsUUFBUUMsSUFBSW9DLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHVzZXJFZGl0QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fZWRpdC1idG4nKSwgLy8g0JrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LjQvdGE0L7QvdC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIHBsYWNlQWRkQnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fYWRkLWJ0bicpLCAvLyDQmtC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuICBjaGFuZ2VBdmF0YXJCdG46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyX19vdmVybGF5JyksIC8vINCa0L3QvtC/0LrQsCDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcblxuICB1c2VyUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF91c2VyJyksIC8vINCf0L7Qv9Cw0L8gVXNlclxuICBwbGFjZVBvcHVwOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfcGxhY2UnKSwgLy8g0J/QvtC/0LDQvyBQbGFjZVxuICBmdWxsc2NyZWVuUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mdWxsc2NyZWVuLXBvcHVwJyksIC8vINCk0YPQu9C70YHQutGA0LjQvSDQv9C+0L/QsNC/XG4gIGRlbGV0ZUFsZXJ0UG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9kZWxldGUtYWxlcnQnKSwgLy8g0J/QvtC/0LDQvyDRgSDQt9Cw0L/RgNC+0YHQvtC8INC90LAg0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4XG4gIGF2YXRhclBvcHVwOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYXZhdGFyJyksIC8vINCf0L7Qv9Cw0L8g0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcblxuICBwb3B1cE5hbWVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dC1maWVsZF9uYW1lJyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvNC10L3QuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgcG9wdXBBYm91dElucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0LWZpZWxkX2Fib3V0JyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIHBvcHVwQXZhdGFySW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXQtZmllbGRfYXZhdGFyJyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0YHRgdGL0LvQutC4INC90LAg0LDQstCw0YLQsNGAXG4gIHNtYXJ0U3VibWl0dGVyczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXNtYXJ0U3VibWl0dGVyJyksIC8vINCj0LzQvdGL0LUg0YHQsNCx0LzQuNGC0YLQtdGA0YtcbiAgXG4gIGNhcmRUZW1wbGF0ZTogJy5jYXJkLXRlbXBsYXRlJyxcblxuICBwb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZTogJ3BvcHVwX19pbnB1dC1maWVsZC1lcnJvcl9hY3RpdmUnLFxuICBwb3B1cElucHV0RmllbGRFcnJvcjogJ3BvcHVwX19pbnB1dC1maWVsZF9lcnJvcicsXG4gIHBvcHVwU3VibWl0QnRuRGlzYWJsZWQ6ICdwb3B1cF9fc3VibWl0LWJ0bl9kaXNhYmxlZCcsXG5cbiAgZm9ybUlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0LWZpZWxkJyxcbiAgZm9ybVN1Ym1pdFNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnRuJyxcbiAgY2FyZEFyZWFTZWxlY3RvcjogJy5jYXJkLWl0ZW1zJyxcblxuICBtZXN0b1VybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MScsXG4gIG1lc3RvQ29ob3J0SWQ6ICdjb2hvcnQtMTcnLFxuICBtZXN0b1Rva2VuOiAnYzEzYjYxYmItNDhlMy00NDNlLWE5YTctMjZiZmIzY2I1NjU3Jyxcbn0iLCJpbXBvcnQgY29uZmlnIGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzXG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybFxuICB9XG5cbiAgZ2V0Q2hlY2tlZFJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpXG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgU29ycnksIHNvbWV0aGluZyB3ZW50IHdyb25nLiBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gIH1cblxuLy9Vc2VyIE1ldGhvZHM6XG5cbiAgZ2V0VXNlckRhdGEoKSB7cmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZWAsIHtoZWFkZXJzOiB0aGlzLmhlYWRlcnN9KVxuICAgIC50aGVuKHRoaXMuZ2V0Q2hlY2tlZFJlc3BvbnNlKVxuICB9XG5cbiAgc2V0VXNlckRhdGEodXNlcikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgYWJvdXQ6IHVzZXIuYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhdmF0YXIpLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5nZXRDaGVja2VkUmVzcG9uc2UpXG4gIH1cblxuLy9QbGFjZSBtZXRob2RzXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIGFkZENhcmQoY2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkLmxpbmssXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5nZXRDaGVja2VkUmVzcG9uc2UpXG4gIH1cblxuICByZW1vdmVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBzZWxlY3RvciwgY2FyZE9wdGlvbnMsIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrLCB1c2VySWQpIHtcbiAgICB0aGlzLl9wbGFjZSA9IGRhdGEubmFtZVxuICAgIHRoaXMuX3VybCA9IGRhdGEubGlua1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkXG4gICAgdGhpcy5fY2FyZE93bmVySWQgPSBkYXRhLm93bmVyLl9pZFxuICAgIHRoaXMuX2xpa2VRdWFuaXR5ID0gZGF0YS5saWtlcy5sZW5ndGhcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXNcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWRcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gY2FyZE9wdGlvbnMuaGFuZGxlQ2FyZENsaWNrXG4gICAgdGhpcy5fc2V0TGlrZSA9IGNhcmRPcHRpb25zLnNldExpa2VcbiAgICB0aGlzLl9yZW1vdmVMaWtlID0gY2FyZE9wdGlvbnMucmVtb3ZlTGlrZVxuICAgIHRoaXMuX2hhbmRsZUNhcmRSZW1vdmUgPSBjYXJkT3B0aW9ucy5oYW5kbGVDYXJkUmVtb3ZlXG4gICAgLy8gdGhpcy5fc2hvd0FsZXJ0UG9wdXAgPSBjYXJkT3B0aW9ucy5zaG93QWxlcnRQb3B1cFxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrID0gaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2tcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkucXVlcnlTZWxlY3RvcignLmNhcmQnKVxuICB9XG5cbiAgZ2V0SWRGb3JEZWxldGUoZXZ0KSB7XG4gICAgcmV0dXJuIChgaWQgZm9yIGRlbGV0ZSA9ICR7ZXZ0LnBhdGhbMl0uaWR9YClcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGxcbiAgfVxuXG4gIF9oYW5kbGVMaWtlKCkge1xuICAgIGlmICh0aGlzLl9saWtlcy5maW5kKGVsID0+IGVsLl9pZCA9PSB0aGlzLl91c2VySWQpID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3NldExpa2UodGhpcy5fZWxlbWVudC5pZClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY291bnRlcicpLmlubmVyVGV4dCA9IHJlcy5saWtlcy5sZW5ndGhcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19oZWFydC1idG4nKS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19oZWFydC1idG5fYWN0aXZlJylcbiAgICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlc1xuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZW1vdmVMaWtlKHRoaXMuX2VsZW1lbnQuaWQpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKS5pbm5lclRleHQgPSByZXMubGlrZXMubGVuZ3RoXG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQtYnRuJykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9faGVhcnQtYnRuX2FjdGl2ZScpXG4gICAgICAgICAgdGhpcy5fbGlrZXMgPSByZXMubGlrZXNcbiAgICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBfc2V0TGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLl9jYXJkRGVsZXRlQnRuICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2sodGhpcylcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYXJ0LWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB0aGlzLl9oYW5kbGVMaWtlKCkpXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1nJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fcGxhY2UsIHRoaXMuX3VybCkpXG4gIH1cblxuICBnZXRFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmREZWxldGVCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idG4nKVxuICAgIGNvbnN0IGltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltZycpXG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLmlubmVyVGV4dCA9IHRoaXMuX3BsYWNlXG4gICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fdXJsKVxuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuX3BsYWNlKVxuICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuX2NhcmRJZClcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKS5pbm5lclRleHQgPSB0aGlzLl9saWtlUXVhbml0eVxuXG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fY2FyZE93bmVySWQpIHtcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdG4ucmVtb3ZlKClcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdG4gPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xpa2VzLmZpbmQoZWwgPT4gZWwuX2lkID09IHRoaXMuX3VzZXJJZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQtYnRuJykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9faGVhcnQtYnRuX2FjdGl2ZScpXG4gICAgfVxuXG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKClcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XG4gIH1cbn0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50XG4gICAgdGhpcy5fZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcyA9IGNvbmZpZy5wb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZVxuICAgIHRoaXMuX3BvcHVwSW5wdXRGaWVsZEVycm9yID0gY29uZmlnLnBvcHVwSW5wdXRGaWVsZEVycm9yXG4gICAgdGhpcy5fcG9wdXBTdWJtaXRCdG5EaXNhYmxlZCA9IGNvbmZpZy5wb3B1cFN1Ym1pdEJ0bkRpc2FibGVkXG4gICAgdGhpcy5fZm9ybUlucHV0U2VsZWN0b3IgPSBjb25maWcuZm9ybUlucHV0U2VsZWN0b3JcbiAgICB0aGlzLl9mb3JtU3VibWl0U2VsZWN0b3IgPSBjb25maWcuZm9ybVN1Ym1pdFNlbGVjdG9yXG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1JbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVN1Ym1pdFNlbGVjdG9yKTtcbiAgfVxuXG4gICAgLy8g0J/QvtC60LDQt9Cw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgY29uc3QgZXJyb3JJbnB1dCA9IGVycm9yRWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG5cbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2VcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzKVxuICAgIGVycm9ySW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9wb3B1cElucHV0RmllbGRFcnJvcilcbiAgfVxuXG4gIC8vINCh0LrRgNGL0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgIGNvbnN0IGVycm9ySW5wdXQgPSBlcnJvckVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZ1xuXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJydcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzKVxuICAgIGVycm9ySW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9wb3B1cElucHV0RmllbGRFcnJvcilcbiAgfVxuXG4gIC8vINCk0YPQvdC60YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgIH1cbiAgfVxuXG4gIC8vINCf0YDQvtCy0LXRgNC60LAg0L3QsCDQvdCw0LvQuNGH0LjQtSDQvdC10LLQsNC70LjQtNC90L7Qs9C+INC/0L7Qu9GPIFxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEZpZWxkcy5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpXG4gIH1cblxuICAvLyDQmNC30LzQtdC90LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQpXG4gICAgICB0aGlzLl9zdWJtaXRCdG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQpXG4gICAgICB0aGlzLl9zdWJtaXRCdG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgfVxuICB9XG5cbiAgLy8gTGlzdGVuZXJzXG4gIF9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1JbnB1dFNlbGVjdG9yKSlcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU3VibWl0U2VsZWN0b3IpXG5cbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUZvcm1TdWJtaXQpXG5cbiAgICB0aGlzLl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKVxuICB9XG5cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yIiwiY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2R5JylcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcylcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdib2R5X25vc2Nyb2xsJylcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpXG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5X25vc2Nyb2xsJylcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge3RoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KGV2dCl9KVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0ICE9PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc2hvd0J1dHRvbigpIHtjb25zb2xlLmxvZyh0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idG4nKS50ZXh0Q29udGVudCl9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBzdWJtaXRGdW5jdGlvbikge1xuICAgIHN1cGVyKHBvcHVwKVxuICAgIHRoaXMuX3N1Ym1pdEZ1bmN0aW9uID0gc3VibWl0RnVuY3Rpb25cbiAgICB0aGlzLl9pbnB1dENvbnRhaW5lciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXQtY29udGFpbmVyJylcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IHRoaXMuX2lucHV0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQtZmllbGQnKVxuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge31cbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dCkgPT4ge3RoaXMuX2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWV9KVxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlc1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKVxuICAgIHRoaXMuX2lucHV0Q29udGFpbmVyLnJlc2V0KClcbiAgfVxuICBcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2lucHV0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHt0aGlzLl9zdWJtaXRGdW5jdGlvbihldnQsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpfSlcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZ1bGxzY3JlZW4tcG9wdXBfX3RpdGxlJykudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mdWxsc2NyZWVuLXBvcHVwX19pbWcnKS5zcmMgPSBsaW5rO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcil7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtc1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKVxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudClcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuICB9XG5cbiAgcmVuZGVySXRlbXMoZGF0YSkge1xuICAgIHRoaXMuY2xlYXIoKVxuICAgIGRhdGEucmV2ZXJzZSgpLmZvckVhY2goaXRlbSA9PiB7dGhpcy5fcmVuZGVyZXIoaXRlbSl9KVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7bmFtZSwgYWJvdXQsIGF2YXRhcn0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKVxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dClcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhcilcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7bmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50fVxuICB9XG5cbiAgZ2V0dXNlckF2YXRhcigpIHtcbiAgICByZXR1cm4gdGhpcy5fYXZhdGFyLnNyY1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZVxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXRcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhclxuICB9XG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcydcbmltcG9ydCB7Y29uZmlnfSBmcm9tICcuLi91dGlscy91dGlscy5qcydcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJ1xuaW1wb3J0IFBvcHVwV2l0aEJ0biBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEJ0bi5qcydcblxuY29uc3QgY2FyZE9wdGlvbnMgPSB7XG5cbiAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4gZnVsbHNjcmVlblBvcHVwSW5zdGFuY2Uub3BlbihuYW1lLCBsaW5rKSwgICAvL0NhbGxiYWNrLWZ1bmN0aW9uIGZvciBmdWxsc2NyZWVuIHBvcHVwXG5cbiAgcmVuZGVyQ2FyZHM6ICgpID0+IHsgICAvL1JlbmRlcmluZyBjYXJkcyBmcm9tIHNlcnZlclxuICAgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IGNhcmRzTGlzdC5yZW5kZXJJdGVtcyhkYXRhKSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICB9LFxuXG4gIGFkZE5ld0NhcmQ6IChldnQsIGlucHV0VmFsdWVzKSA9PiB7ICAgLy9BZGRpbmcgbmV3IGNhcmRcbiAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGNhcmQgPSB7bmFtZTogaW5wdXRWYWx1ZXMucGxhY2UsIGxpbms6IGlucHV0VmFsdWVzLnVybCx9XG4gICAgYXBpLmFkZENhcmQoY2FyZClcbiAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgY3JlYXRlQ2FyZChjYXJkKVxuICAgICAgcGxhY2VQb3B1cEluc3RhbmNlLmNsb3NlKClcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICB9LFxuXG4gIHNldExpa2U6IChpZCkgPT4gYXBpLmxpa2VDYXJkKGlkKS5jYXRjaCgoZXJyKSA9PiBlcnIpLFxuXG4gIHJlbW92ZUxpa2U6IChpZCkgPT4gYXBpLmRpc2xpa2VDYXJkKGlkKS5jYXRjaCgoZXJyKSA9PiBlcnIpLFxuXG4gIHNob3dBbGVydFBvcHVwOiAoKSA9PiBwb3B1cHdpdGhCdG5JbnN0YW5jZS5vcGVuKCksXG5cbiAgaGFuZGxlUGxhY2VQb3B1cEJ0bjogKCkgPT4ge1xuICAgIHBsYWNlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpXG4gICAgcGxhY2VQb3B1cEluc3RhbmNlLm9wZW4oKVxuICB9XG59XG5cbmNvbnN0IHVzZXJPcHRpb25zID0ge1xuICBnZXRVc2VySWQ6ICgpID0+IGFwaS5nZXRVc2VyRGF0YSgpICAgLy8gR2V0dGluZyB1c2VyIElEIGZyb20gc2VydmVyXG4gICAgLnRoZW4oKGRhdGEpID0+IHVzZXJJZCA9IGRhdGEuX2lkKVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKSxcbiAgXG4gIGdldFVzZXI6ICgpID0+IGFwaS5nZXRVc2VyRGF0YSgpICAgLy8gR2V0dGluZyB1c2VybmFtZSAmIGluZm8gYWJvdXQgdXNlciBmcm9tIHNlcnZlclxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpLFxuXG4gIGNoYW5nZVVzZXI6IChldnQsIGlucHV0VmFsdWVzKSA9PiB7ICAgLy8gQ2hhbmdlIHVzZXJuYW1lICYgaW5mbyBhYm91dCB1c2VyIG9uIHNlcnZlciAmIGxvY2FsXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcblxuICAgIHNob3dQcm9jZXNzaW5nKHRydWUpXG4gICAgYXBpLnNldFVzZXJEYXRhKGlucHV0VmFsdWVzKVxuICAgICAgLnRoZW4oKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzLm5hbWUsIGlucHV0VmFsdWVzLmFib3V0KVxuICAgICAgICB1c2VyUG9wdXBJbnN0YW5jZS5jbG9zZSgpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAuZmluYWxseSgoKSA9PiBzaG93UHJvY2Vzc2luZyhmYWxzZSkpXG4gIH0sXG5cbiAgaGFuZGxlVXNlclBvcHVwQnRuOiAoKSA9PiB7ICAgLy9DYWxsYmFjay1mdW5jdGlvbiBmb3IgdXNlci1wb3B1cFxuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKVxuICAgIGNvbmZpZy5wb3B1cE5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWVcbiAgICBjb25maWcucG9wdXBBYm91dElucHV0LnZhbHVlID0gdXNlckRhdGEuYWJvdXRcbiAgICB1c2VyUG9wdXBJbnN0YW5jZS5vcGVuKClcbiAgfSxcblxuICBjaGFuZ2VBdmF0YXI6IChldnQsIGlucHV0VmFsdWUpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIHNob3dQcm9jZXNzaW5nKHRydWUpXG4gICAgYXBpLnNldFVzZXJBdmF0YXIoaW5wdXRWYWx1ZSlcbiAgICAgIC50aGVuKChpbnB1dFZhbHVlKT0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoaW5wdXRWYWx1ZS5hdmF0YXIpXG4gICAgICBQb3B1cFdpdGhBdmF0YXJJbnN0YW5jZS5jbG9zZSgpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiBzaG93UHJvY2Vzc2luZyhmYWxzZSkpIFxuICB9LFxuICBcbiAgaGFuZGxlQXZhdGFyQnRuOiAoKSA9PiB7XG4gICAgY29uc3QgdXNlckF2YXRhciA9IHVzZXJJbmZvLmdldHVzZXJBdmF0YXIoKVxuICAgIGNvbmZpZy5wb3B1cEF2YXRhcklucHV0LnZhbHVlID0gdXNlckF2YXRhclxuICAgIGF2YXRhckZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICAgIFBvcHVwV2l0aEF2YXRhckluc3RhbmNlLm9wZW4oKVxuICB9XG59XG5cbmZ1bmN0aW9uIHNob3dQcm9jZXNzaW5nKHByb2Nlc3NpbmcpIHtcbiAgaWYgKHByb2Nlc3NpbmcpIHtcbiAgICAgIEFycmF5LmZyb20oY29uZmlnLnNtYXJ0U3VibWl0dGVycykuZm9yRWFjaCgoc3VibWl0KSA9PiB7XG4gICAgICAgICAgc3VibWl0LnZhbHVlID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAgICAgfSlcbiAgfSBlbHNlIHtcbiAgICAgIEFycmF5LmZyb20oY29uZmlnLnNtYXJ0U3VibWl0dGVycykuZm9yRWFjaCgoc3VibWl0KSA9PiB7XG4gICAgICAgICAgc3VibWl0LnZhbHVlID0gXCLQodC+0YXRgNCw0L3QuNGC0YxcIjtcbiAgICAgIH0pXG4gIH1cbn1cblxuY29uc3QgcG9wdXB3aXRoQnRuSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoQnRuKGNvbmZpZy5kZWxldGVBbGVydFBvcHVwKVxucG9wdXB3aXRoQnRuSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVCdXR0b25DbGljayhjYXJkKSB7XG4gIFxuICBwb3B1cHdpdGhCdG5JbnN0YW5jZS5vcGVuKClcbiAgcG9wdXB3aXRoQnRuSW5zdGFuY2Uuc2V0U3VibWl0RnVuY3Rpb24oKCkgPT4ge1xuICAgIGFwaS5yZW1vdmVDYXJkKGNhcmQuX2NhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5oYW5kbGVEZWxldGUoKVxuICAgICAgICBwb3B1cHdpdGhCdG5JbnN0YW5jZS5jbG9zZSgpXG4gICAgICB9KVxuXG4gIH0pXG59XG5cblxuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7ICAgLy9DcmVhdGluZyBjYXJkIG1ldGhvZFxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgY29uZmlnLmNhcmRUZW1wbGF0ZSwgY2FyZE9wdGlvbnMsIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrLCB1c2VySWQpXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkLmdldEVsZW1lbnQoKVxuICBjYXJkc0xpc3QuYWRkSXRlbShlbGVtZW50KVxufVxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgdXJsOiBgJHtjb25maWcubWVzdG9Vcmx9LyR7Y29uZmlnLm1lc3RvQ29ob3J0SWR9YCxcbiAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIiwgYXV0aG9yaXphdGlvbjogY29uZmlnLm1lc3RvVG9rZW4sfVxufSlcblxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGRhdGEpID0+IGRhdGEpLFxuICByZW5kZXJlcjogaXRlbSA9PiB7Y3JlYXRlQ2FyZChpdGVtKX19LFxuICBjb25maWcuY2FyZEFyZWFTZWxlY3RvclxuKVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7bmFtZTogJy51c2VyX19uYW1lJywgYWJvdXQ6ICcudXNlcl9fYWJvdXQnLCBhdmF0YXI6ICcudXNlcl9fcGhvdG8nfSlcbmNvbnN0IHVzZXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjb25maWcudXNlclBvcHVwKVxudXNlckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cblxuY29uc3QgZnVsbHNjcmVlblBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoY29uZmlnLmZ1bGxzY3JlZW5Qb3B1cClcbmZ1bGxzY3JlZW5Qb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKClcblxuY29uc3QgdXNlclBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcudXNlclBvcHVwLCB1c2VyT3B0aW9ucy5jaGFuZ2VVc2VyKVxudXNlclBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5jb25zdCBwbGFjZVBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcucGxhY2VQb3B1cCwgY2FyZE9wdGlvbnMuYWRkTmV3Q2FyZClcbnBsYWNlUG9wdXBJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpXG5cbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY29uZmlnLnBsYWNlUG9wdXApXG5wbGFjZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cbmNvbnN0IFBvcHVwV2l0aEF2YXRhckluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uZmlnLmF2YXRhclBvcHVwLCB1c2VyT3B0aW9ucy5jaGFuZ2VBdmF0YXIpXG5Qb3B1cFdpdGhBdmF0YXJJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpXG5cbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNvbmZpZy5hdmF0YXJQb3B1cClcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cbmNvbmZpZy51c2VyRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVzZXJPcHRpb25zLmhhbmRsZVVzZXJQb3B1cEJ0bilcbmNvbmZpZy5wbGFjZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhcmRPcHRpb25zLmhhbmRsZVBsYWNlUG9wdXBCdG4pXG5jb25maWcuY2hhbmdlQXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdXNlck9wdGlvbnMuaGFuZGxlQXZhdGFyQnRuKVxuXG5cbmxldCB1c2VySWQgPSAnJ1xudXNlck9wdGlvbnMuZ2V0VXNlcklkKClcbmNhcmRPcHRpb25zLnJlbmRlckNhcmRzKClcbnVzZXJPcHRpb25zLmdldFVzZXIoKSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhCdG4gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgc3VwZXIocG9wdXApXG4gICAgdGhpcy5fZGVsZXRlU3VibWl0dGVyID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmpzLWRlbGV0ZV9zdWJtaXR0ZXInKVxuICAgIHRoaXMuc3VibWl0RnVuY3Rpb24gPSBudWxsXG4gIH1cblxuICBzZXRTdWJtaXRGdW5jdGlvbihzdWJtaXRGdW5jdGlvbikge1xuICAgIHRoaXMuc3VibWl0RnVuY3Rpb24gPSBzdWJtaXRGdW5jdGlvblxufVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGRlYnVnZ2VyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2RlbGV0ZVN1Ym1pdHRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLnN1Ym1pdEZ1bmN0aW9uKClcbiAgICB9KVxuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==