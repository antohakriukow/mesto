(()=>{"use strict";var e={userEditBtn:document.querySelector(".user__edit-btn"),placeAddBtn:document.querySelector(".user__add-btn"),changeAvatarBtn:document.querySelector(".user__overlay"),userPopup:document.querySelector(".popup_user"),placePopup:document.querySelector(".popup_place"),fullscreenPopup:document.querySelector(".fullscreen-popup"),deleteAlertPopup:document.querySelector(".popup_delete-alert"),avatarPopup:document.querySelector(".popup_avatar"),popupNameInput:document.querySelector(".popup__input-field_name"),popupAboutInput:document.querySelector(".popup__input-field_about"),popupAvatarInput:document.querySelector(".popup__input-field_avatar"),smartSubmitters:document.querySelectorAll(".js-smartSubmitter"),cardTemplate:".card-template",popupInputFieldErrorActive:"popup__input-field-error_active",popupInputFieldError:"popup__input-field_error",popupSubmitBtnDisabled:"popup__submit-btn_disabled",formInputSelector:".popup__input-field",formSubmitSelector:".popup__submit-btn",cardAreaSelector:".card-items",mestoUrl:"https://mesto.nomoreparties.co/v1",mestoCohortId:"cohort-17",mestoToken:"c13b61bb-48e3-443e-a9a7-26bfb3cb5657"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headers=t.headers,this.url=t.url}var n,r;return n=e,(r=[{key:"getCheckedResponse",value:function(e){return e.ok?e.json():Promise.reject("Sorry, something went wrong. Error: ".concat(e.status))}},{key:"getUserData",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:this.headers}).then(this.getCheckedResponse)}},{key:"setUserData",value:function(e){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this.getCheckedResponse)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then(this.getCheckedResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers}).then(this.getCheckedResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this.getCheckedResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then(this.getCheckedResponse)}},{key:"likeCard",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then(this.getCheckedResponse)}},{key:"dislikeCard",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then(this.getCheckedResponse)}}])&&t(n.prototype,r),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._place=t.name,this._url=t.link,this._cardId=t._id,this._cardOwnerId=t.owner._id,this._likeQuanity=t.likes.length,this._likes=t.likes,this._userId=i,this._selector=n,this._handleCardClick=r.handleCardClick,this._setLike=r.setLike,this._removeLike=r.removeLike,this._handleCardRemove=r.handleCardRemove,this._handleDeleteButtonClick=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0).querySelector(".card")}},{key:"getIdForDelete",value:function(e){return"id for delete = ".concat(e.path[2].id)}},{key:"handleDelete",value:function(){this._element.remove(),this._element=null}},{key:"_handleLike",value:function(){var e=this;void 0===this._likes.find((function(t){return t._id==e._userId}))?this._setLike(this._element.id).then((function(t){e._element.querySelector(".card__like-counter").innerText=t.likes.length,e._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active"),e._likes=t.likes})):this._removeLike(this._element.id).then((function(t){e._element.querySelector(".card__like-counter").innerText=t.likes.length,e._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active"),e._likes=t.likes}))}},{key:"_setListeners",value:function(){var e=this;null!==this._cardDeleteBtn&&this._element.querySelector(".card__trash-btn").addEventListener("click",(function(){e._handleDeleteButtonClick(e)})),this._element.querySelector(".card__heart-btn").addEventListener("click",(function(){return e._handleLike()})),this._element.querySelector(".card__img").addEventListener("click",(function(){return e._handleCardClick(e._place,e._url)}))}},{key:"getElement",value:function(){var e=this;this._element=this._getTemplate(),this._cardDeleteBtn=this._element.querySelector(".card__trash-btn");var t=this._element.querySelector(".card__img");return this._element.querySelector(".card__title").innerText=this._place,t.setAttribute("src",this._url),t.setAttribute("alt",this._place),this._element.setAttribute("id",this._cardId),this._element.querySelector(".card__like-counter").innerText=this._likeQuanity,this._userId!==this._cardOwnerId&&(this._cardDeleteBtn.remove(),this._cardDeleteBtn=null),void 0!==this._likes.find((function(t){return t._id==e._userId}))&&this._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active"),this._setListeners(),this._element}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._formInputErrorActiveClass=t.popupInputFieldErrorActive,this._popupInputFieldError=t.popupInputFieldError,this._popupSubmitBtnDisabled=t.popupSubmitBtnDisabled,this._formInputSelector=t.formInputSelector,this._formSubmitSelector=t.formSubmitSelector,this._inputFields=Array.from(n.querySelectorAll(t.formInputSelector)),this._submitBtn=n.querySelector(t.formSubmitSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error")),r=n.previousElementSibling;n.textContent=t,n.classList.add(this._formInputErrorActiveClass),r.classList.add(this._popupInputFieldError)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error")),n=t.previousElementSibling;t.textContent="",t.classList.remove(this._formInputErrorActiveClass),n.classList.remove(this._popupInputFieldError)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputFields.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitBtn.classList.add(this._popupSubmitBtnDisabled),this._submitBtn.setAttribute("disabled",!0)):(this._submitBtn.classList.remove(this._popupSubmitBtnDisabled),this._submitBtn.removeAttribute("disabled"))}},{key:"_setValidationEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._formInputSelector)),n=this._formElement.querySelector(this._formSubmitSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e.toggleButtonState(t,n)}))})),this.toggleButtonState(t,n)}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setValidationEventListeners()}}])&&i(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=document.querySelector(".body"),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){c.classList.add("body_noscroll"),this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),c.classList.remove("body_noscroll"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()})),this._popup.addEventListener("click",(function(t){e._closePopupByClickOnOverlay(t)}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closePopupByClickOnOverlay",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"showButton",value:function(){console.log(this._popup.querySelector(".popup__submit-btn").textContent)}}])&&a(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFunction=t,n._inputContainer=n._popup.querySelector(".popup__input-container"),n._inputFields=n._inputContainer.querySelectorAll(".popup__input-field"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputFields.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"close",value:function(){f(y(u.prototype),"close",this).call(this),this._inputContainer.reset()}},{key:"setEventListeners",value:function(){var e=this;f(y(u.prototype),"setEventListeners",this).call(this),this._inputContainer.addEventListener("submit",(function(t){e._submitFunction(t,e._getInputValues())}))}}])&&p(t.prototype,n),u}(s);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(){return m(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e,t){this._popup.querySelector(".fullscreen-popup__title").textContent=e,this._popup.querySelector(".fullscreen-popup__img").src=t,k(E(u.prototype),"open",this).call(this)}}])&&b(t.prototype,n),u}(s);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.reverse().forEach((function(e){t._renderer(e)}))}}])&&C(t.prototype,n),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"getuserAvatar",value:function(){return this._avatar.src}},{key:"setUserInfo",value:function(e,t){this._name.textContent=e,this._about.textContent=t}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}}])&&O(t.prototype,n),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return(q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T={handleCardClick:function(e,t){return M.open(e,t)},renderCards:function(){N.getInitialCards().then((function(e){return H.renderItems(e)})).catch((function(e){return console.log(e)}))},addNewCard:function(e,t){e.preventDefault();var n={name:t.place,link:t.url};N.addCard(n).then((function(e){V(e),z.close()})).catch((function(e){return console.log(e)}))},setLike:function(e){return N.likeCard(e).catch((function(e){return e}))},removeLike:function(e){return N.dislikeCard(e).catch((function(e){return e}))},showAlertPopup:function(){return F.open()},handlePlacePopupBtn:function(){$.toggleButtonState(),z.open()}};function x(t){t?Array.from(e.smartSubmitters).forEach((function(e){e.value="Сохранение..."})):Array.from(e.smartSubmitters).forEach((function(e){e.value="Сохранить"}))}var F=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._deleteSubmitter=t._popup.querySelector(".js-delete_submitter"),t.submitFunction=null,t}return t=u,(n=[{key:"setSubmitFunction",value:function(e){this.submitFunction=e}},{key:"setEventListeners",value:function(){var e=this;q(D(u.prototype),"setEventListeners",this).call(this),this._deleteSubmitter.addEventListener("click",(function(t){t.preventDefault(),e.submitFunction()}))}}])&&A(t.prototype,n),u}(s))(e.deleteAlertPopup);function U(e){F.open(),F.setSubmitFunction((function(){N.removeCard(e._cardId).then((function(){e.handleDelete(),F.close()}))}))}F.setEventListeners();var V=function(t){var n=new o(t,e.cardTemplate,T,U,W).getElement();H.addItem(n)},N=new n({url:"".concat(e.mestoUrl,"/").concat(e.mestoCohortId),headers:{"Content-Type":"application/json",authorization:e.mestoToken}}),H=new I({items:N.getInitialCards().then((function(e){return e})),renderer:function(e){V(e)}},e.cardAreaSelector),J=new P({name:".user__name",about:".user__about",avatar:".user__photo"});new u(e,e.userPopup).enableValidation();var M=new w(e.fullscreenPopup);M.setEventListeners();var Q=new _(e.userPopup,(function(e,t){e.preventDefault(),x(!0),N.setUserData(t).then((function(e){J.setUserInfo(e.name,e.about),Q.close()})).catch((function(e){return console.log(e)})).finally((function(){return x(!1)}))}));Q.setEventListeners();var z=new _(e.placePopup,T.addNewCard);z.setEventListeners();var $=new u(e,e.placePopup);$.enableValidation();var G=new _(e.avatarPopup,(function(e,t){e.preventDefault(),x(!0),N.setUserAvatar(t).then((function(e){J.setUserAvatar(e.avatar),G.close()})).catch((function(e){return console.log(e)})).finally((function(){return x(!1)}))}));G.setEventListeners();var K=new u(e,e.avatarPopup);K.enableValidation(),e.userEditBtn.addEventListener("click",(function(){var t=J.getUserInfo();e.popupNameInput.value=t.name,e.popupAboutInput.value=t.about,Q.open()})),e.placeAddBtn.addEventListener("click",T.handlePlacePopupBtn),e.changeAvatarBtn.addEventListener("click",(function(){var t=J.getuserAvatar();e.popupAvatarInput.value=t,K.toggleButtonState(),G.open()}));var W="";Promise.all([N.getInitialCards(),N.getUserData()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];W=i._id,J.setUserInfo(i.name,i.about),J.setUserAvatar(i.avatar),H.renderItems(o)})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhCdG4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwidXNlckVkaXRCdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwbGFjZUFkZEJ0biIsImNoYW5nZUF2YXRhckJ0biIsInVzZXJQb3B1cCIsInBsYWNlUG9wdXAiLCJmdWxsc2NyZWVuUG9wdXAiLCJkZWxldGVBbGVydFBvcHVwIiwiYXZhdGFyUG9wdXAiLCJwb3B1cE5hbWVJbnB1dCIsInBvcHVwQWJvdXRJbnB1dCIsInBvcHVwQXZhdGFySW5wdXQiLCJzbWFydFN1Ym1pdHRlcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FyZFRlbXBsYXRlIiwicG9wdXBJbnB1dEZpZWxkRXJyb3JBY3RpdmUiLCJwb3B1cElucHV0RmllbGRFcnJvciIsInBvcHVwU3VibWl0QnRuRGlzYWJsZWQiLCJmb3JtSW5wdXRTZWxlY3RvciIsImZvcm1TdWJtaXRTZWxlY3RvciIsImNhcmRBcmVhU2VsZWN0b3IiLCJtZXN0b1VybCIsIm1lc3RvQ29ob3J0SWQiLCJtZXN0b1Rva2VuIiwiQXBpIiwib3B0aW9ucyIsInRoaXMiLCJoZWFkZXJzIiwidXJsIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsImdldENoZWNrZWRSZXNwb25zZSIsInVzZXIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJhYm91dCIsImF2YXRhciIsImNhcmQiLCJsaW5rIiwiaWQiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwiY2FyZE9wdGlvbnMiLCJoYW5kbGVEZWxldGVCdXR0b25DbGljayIsInVzZXJJZCIsIl9wbGFjZSIsIl91cmwiLCJfY2FyZElkIiwiX2lkIiwiX2NhcmRPd25lcklkIiwib3duZXIiLCJfbGlrZVF1YW5pdHkiLCJsaWtlcyIsImxlbmd0aCIsIl9saWtlcyIsIl91c2VySWQiLCJfc2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3NldExpa2UiLCJzZXRMaWtlIiwiX3JlbW92ZUxpa2UiLCJyZW1vdmVMaWtlIiwiX2hhbmRsZUNhcmRSZW1vdmUiLCJoYW5kbGVDYXJkUmVtb3ZlIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2dCIsInBhdGgiLCJfZWxlbWVudCIsInJlbW92ZSIsInVuZGVmaW5lZCIsImZpbmQiLCJlbCIsImlubmVyVGV4dCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRGVsZXRlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2dldFRlbXBsYXRlIiwiaW1nIiwic2V0QXR0cmlidXRlIiwiX3NldExpc3RlbmVycyIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2Zvcm1JbnB1dEVycm9yQWN0aXZlQ2xhc3MiLCJfcG9wdXBJbnB1dEZpZWxkRXJyb3IiLCJfcG9wdXBTdWJtaXRCdG5EaXNhYmxlZCIsIl9mb3JtSW5wdXRTZWxlY3RvciIsIl9mb3JtU3VibWl0U2VsZWN0b3IiLCJfaW5wdXRGaWVsZHMiLCJBcnJheSIsImZyb20iLCJfc3VibWl0QnRuIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiZXJyb3JJbnB1dCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsImFkZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsIl9jbG9zZVBvcHVwQnlDbGlja09uT3ZlcmxheSIsImtleSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb25zb2xlIiwibG9nIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEZ1bmN0aW9uIiwiX3N1Ym1pdEZ1bmN0aW9uIiwiX2lucHV0Q29udGFpbmVyIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJzcmMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaW5uZXJIVE1MIiwiY2xlYXIiLCJyZXZlcnNlIiwiaXRlbSIsIlVzZXJJbmZvIiwiX25hbWUiLCJfYWJvdXQiLCJfYXZhdGFyIiwiZnVsbHNjcmVlblBvcHVwSW5zdGFuY2UiLCJvcGVuIiwicmVuZGVyQ2FyZHMiLCJhcGkiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkc0xpc3QiLCJyZW5kZXJJdGVtcyIsImVyciIsImFkZE5ld0NhcmQiLCJpbnB1dFZhbHVlcyIsInBsYWNlIiwiYWRkQ2FyZCIsImNyZWF0ZUNhcmQiLCJwbGFjZVBvcHVwSW5zdGFuY2UiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwic2hvd0FsZXJ0UG9wdXAiLCJwb3B1cHdpdGhCdG5JbnN0YW5jZSIsImhhbmRsZVBsYWNlUG9wdXBCdG4iLCJwbGFjZUZvcm1WYWxpZGF0b3IiLCJzaG93UHJvY2Vzc2luZyIsInByb2Nlc3NpbmciLCJzdWJtaXQiLCJfZGVsZXRlU3VibWl0dGVyIiwic2V0U3VibWl0RnVuY3Rpb24iLCJyZW1vdmVDYXJkIiwiaGFuZGxlRGVsZXRlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRFbGVtZW50IiwiYWRkSXRlbSIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsIkZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwidXNlclBvcHVwSW5zdGFuY2UiLCJzZXRVc2VyRGF0YSIsInNldFVzZXJJbmZvIiwiUG9wdXBXaXRoQXZhdGFySW5zdGFuY2UiLCJpbnB1dFZhbHVlIiwic2V0VXNlckF2YXRhciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwidXNlckF2YXRhciIsImdldHVzZXJBdmF0YXIiLCJhbGwiLCJnZXRVc2VyRGF0YSIsImNhcmRzIl0sIm1hcHBpbmdzIjoibUJBQU8sSUFBTUEsRUFBUyxDQUNwQkMsWUFBYUMsU0FBU0MsY0FBYyxtQkFDcENDLFlBQWFGLFNBQVNDLGNBQWMsa0JBQ3BDRSxnQkFBaUJILFNBQVNDLGNBQWMsa0JBRXhDRyxVQUFX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UUFBU3JDLEVBQVl1SSxxQkFDekQ3TCxFQUFPSyxnQkFBZ0JzRixpQkFBaUIsU0EvRXJCLFdBQ2YsSUFBTTJILEVBQWFaLEVBQVNhLGdCQUM1QnZOLHlCQUFnQ3NOLEVBQ2hDSCxFQUFvQnBGLG9CQUNwQmlGLEVBQXdCcEMsVUE4RTVCLElBQUlwSCxFQUFTLEdBRWJ0QixRQUFRc0wsSUFBSSxDQUFDMUMsRUFBSUMsa0JBQW1CRCxFQUFJMkMsZ0JBQ3JDbkwsTUFBSyxZQUFtQixJLElBQUEsRyxFQUFBLEUsNENBQUEsSSxvd0JBQWpCb0wsRUFBaUIsS0FBVnRLLEVBQVUsS0FDdkJJLEVBQVNKLEVBQUtRLElBRWQ4SSxFQUFTSyxZQUFZM0osRUFBS1AsS0FBTU8sRUFBS04sT0FDckM0SixFQUFTUSxjQUFjOUosRUFBS0wsUUFFNUJpSSxFQUFVQyxZQUFZeUMsTUFQMUIsT0FTUyxTQUFDeEMsR0FBRCxPQUFTckMsUUFBUUMsSUFBSW9DLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHVzZXJFZGl0QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fZWRpdC1idG4nKSwgLy8g0JrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LjQvdGE0L7QvdC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIHBsYWNlQWRkQnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fYWRkLWJ0bicpLCAvLyDQmtC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuICBjaGFuZ2VBdmF0YXJCdG46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyX19vdmVybGF5JyksIC8vINCa0L3QvtC/0LrQsCDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcblxuICB1c2VyUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF91c2VyJyksIC8vINCf0L7Qv9Cw0L8gVXNlclxuICBwbGFjZVBvcHVwOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfcGxhY2UnKSwgLy8g0J/QvtC/0LDQvyBQbGFjZVxuICBmdWxsc2NyZWVuUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mdWxsc2NyZWVuLXBvcHVwJyksIC8vINCk0YPQu9C70YHQutGA0LjQvSDQv9C+0L/QsNC/XG4gIGRlbGV0ZUFsZXJ0UG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9kZWxldGUtYWxlcnQnKSwgLy8g0J/QvtC/0LDQvyDRgSDQt9Cw0L/RgNC+0YHQvtC8INC90LAg0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4XG4gIGF2YXRhclBvcHVwOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYXZhdGFyJyksIC8vINCf0L7Qv9Cw0L8g0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcblxuICBwb3B1cE5hbWVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dC1maWVsZF9uYW1lJyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvNC10L3QuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgcG9wdXBBYm91dElucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0LWZpZWxkX2Fib3V0JyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIHBvcHVwQXZhdGFySW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXQtZmllbGRfYXZhdGFyJyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0YHRgdGL0LvQutC4INC90LAg0LDQstCw0YLQsNGAXG4gIHNtYXJ0U3VibWl0dGVyczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXNtYXJ0U3VibWl0dGVyJyksIC8vINCj0LzQvdGL0LUg0YHQsNCx0LzQuNGC0YLQtdGA0YtcbiAgXG4gIGNhcmRUZW1wbGF0ZTogJy5jYXJkLXRlbXBsYXRlJyxcblxuICBwb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZTogJ3BvcHVwX19pbnB1dC1maWVsZC1lcnJvcl9hY3RpdmUnLFxuICBwb3B1cElucHV0RmllbGRFcnJvcjogJ3BvcHVwX19pbnB1dC1maWVsZF9lcnJvcicsXG4gIHBvcHVwU3VibWl0QnRuRGlzYWJsZWQ6ICdwb3B1cF9fc3VibWl0LWJ0bl9kaXNhYmxlZCcsXG5cbiAgZm9ybUlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0LWZpZWxkJyxcbiAgZm9ybVN1Ym1pdFNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnRuJyxcbiAgY2FyZEFyZWFTZWxlY3RvcjogJy5jYXJkLWl0ZW1zJyxcblxuICBtZXN0b1VybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MScsXG4gIG1lc3RvQ29ob3J0SWQ6ICdjb2hvcnQtMTcnLFxuICBtZXN0b1Rva2VuOiAnYzEzYjYxYmItNDhlMy00NDNlLWE5YTctMjZiZmIzY2I1NjU3Jyxcbn0iLCJpbXBvcnQgY29uZmlnIGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzXG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybFxuICB9XG5cbiAgZ2V0Q2hlY2tlZFJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpXG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgU29ycnksIHNvbWV0aGluZyB3ZW50IHdyb25nLiBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gIH1cblxuLy9Vc2VyIE1ldGhvZHM6XG5cbiAgZ2V0VXNlckRhdGEoKSB7cmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZWAsIHtoZWFkZXJzOiB0aGlzLmhlYWRlcnN9KVxuICAgIC50aGVuKHRoaXMuZ2V0Q2hlY2tlZFJlc3BvbnNlKVxuICB9XG5cbiAgc2V0VXNlckRhdGEodXNlcikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgYWJvdXQ6IHVzZXIuYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhdmF0YXIpLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5nZXRDaGVja2VkUmVzcG9uc2UpXG4gIH1cblxuLy9QbGFjZSBtZXRob2RzXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIGFkZENhcmQoY2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkLmxpbmssXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5nZXRDaGVja2VkUmVzcG9uc2UpXG4gIH1cblxuICByZW1vdmVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLmdldENoZWNrZWRSZXNwb25zZSlcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBzZWxlY3RvciwgY2FyZE9wdGlvbnMsIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrLCB1c2VySWQpIHtcbiAgICB0aGlzLl9wbGFjZSA9IGRhdGEubmFtZVxuICAgIHRoaXMuX3VybCA9IGRhdGEubGlua1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkXG4gICAgdGhpcy5fY2FyZE93bmVySWQgPSBkYXRhLm93bmVyLl9pZFxuICAgIHRoaXMuX2xpa2VRdWFuaXR5ID0gZGF0YS5saWtlcy5sZW5ndGhcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXNcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWRcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gY2FyZE9wdGlvbnMuaGFuZGxlQ2FyZENsaWNrXG4gICAgdGhpcy5fc2V0TGlrZSA9IGNhcmRPcHRpb25zLnNldExpa2VcbiAgICB0aGlzLl9yZW1vdmVMaWtlID0gY2FyZE9wdGlvbnMucmVtb3ZlTGlrZVxuICAgIHRoaXMuX2hhbmRsZUNhcmRSZW1vdmUgPSBjYXJkT3B0aW9ucy5oYW5kbGVDYXJkUmVtb3ZlXG4gICAgLy8gdGhpcy5fc2hvd0FsZXJ0UG9wdXAgPSBjYXJkT3B0aW9ucy5zaG93QWxlcnRQb3B1cFxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrID0gaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2tcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkucXVlcnlTZWxlY3RvcignLmNhcmQnKVxuICB9XG5cbiAgZ2V0SWRGb3JEZWxldGUoZXZ0KSB7XG4gICAgcmV0dXJuIChgaWQgZm9yIGRlbGV0ZSA9ICR7ZXZ0LnBhdGhbMl0uaWR9YClcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGxcbiAgfVxuXG4gIF9oYW5kbGVMaWtlKCkge1xuICAgIGlmICh0aGlzLl9saWtlcy5maW5kKGVsID0+IGVsLl9pZCA9PSB0aGlzLl91c2VySWQpID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3NldExpa2UodGhpcy5fZWxlbWVudC5pZClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY291bnRlcicpLmlubmVyVGV4dCA9IHJlcy5saWtlcy5sZW5ndGhcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19oZWFydC1idG4nKS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19oZWFydC1idG5fYWN0aXZlJylcbiAgICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlc1xuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZW1vdmVMaWtlKHRoaXMuX2VsZW1lbnQuaWQpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKS5pbm5lclRleHQgPSByZXMubGlrZXMubGVuZ3RoXG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQtYnRuJykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9faGVhcnQtYnRuX2FjdGl2ZScpXG4gICAgICAgICAgdGhpcy5fbGlrZXMgPSByZXMubGlrZXNcbiAgICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBfc2V0TGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLl9jYXJkRGVsZXRlQnRuICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2sodGhpcylcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYXJ0LWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB0aGlzLl9oYW5kbGVMaWtlKCkpXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1nJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fcGxhY2UsIHRoaXMuX3VybCkpXG4gIH1cblxuICBnZXRFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmREZWxldGVCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idG4nKVxuICAgIGNvbnN0IGltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltZycpXG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLmlubmVyVGV4dCA9IHRoaXMuX3BsYWNlXG4gICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fdXJsKVxuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuX3BsYWNlKVxuICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuX2NhcmRJZClcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKS5pbm5lclRleHQgPSB0aGlzLl9saWtlUXVhbml0eVxuXG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fY2FyZE93bmVySWQpIHtcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdG4ucmVtb3ZlKClcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdG4gPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xpa2VzLmZpbmQoZWwgPT4gZWwuX2lkID09IHRoaXMuX3VzZXJJZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQtYnRuJykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9faGVhcnQtYnRuX2FjdGl2ZScpXG4gICAgfVxuXG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKClcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XG4gIH1cbn0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50XG4gICAgdGhpcy5fZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcyA9IGNvbmZpZy5wb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZVxuICAgIHRoaXMuX3BvcHVwSW5wdXRGaWVsZEVycm9yID0gY29uZmlnLnBvcHVwSW5wdXRGaWVsZEVycm9yXG4gICAgdGhpcy5fcG9wdXBTdWJtaXRCdG5EaXNhYmxlZCA9IGNvbmZpZy5wb3B1cFN1Ym1pdEJ0bkRpc2FibGVkXG4gICAgdGhpcy5fZm9ybUlucHV0U2VsZWN0b3IgPSBjb25maWcuZm9ybUlucHV0U2VsZWN0b3JcbiAgICB0aGlzLl9mb3JtU3VibWl0U2VsZWN0b3IgPSBjb25maWcuZm9ybVN1Ym1pdFNlbGVjdG9yXG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1JbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuZm9ybVN1Ym1pdFNlbGVjdG9yKTtcbiAgfVxuXG4gICAgLy8g0J/QvtC60LDQt9Cw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgY29uc3QgZXJyb3JJbnB1dCA9IGVycm9yRWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG5cbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2VcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzKVxuICAgIGVycm9ySW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9wb3B1cElucHV0RmllbGRFcnJvcilcbiAgfVxuXG4gIC8vINCh0LrRgNGL0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgIGNvbnN0IGVycm9ySW5wdXQgPSBlcnJvckVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZ1xuXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJydcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzKVxuICAgIGVycm9ySW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9wb3B1cElucHV0RmllbGRFcnJvcilcbiAgfVxuXG4gIC8vINCk0YPQvdC60YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgIH1cbiAgfVxuXG4gIC8vINCf0YDQvtCy0LXRgNC60LAg0L3QsCDQvdCw0LvQuNGH0LjQtSDQvdC10LLQsNC70LjQtNC90L7Qs9C+INC/0L7Qu9GPIFxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEZpZWxkcy5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpXG4gIH1cblxuICAvLyDQmNC30LzQtdC90LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQpXG4gICAgICB0aGlzLl9zdWJtaXRCdG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQpXG4gICAgICB0aGlzLl9zdWJtaXRCdG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgfVxuICB9XG5cbiAgLy8gTGlzdGVuZXJzXG4gIF9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1JbnB1dFNlbGVjdG9yKSlcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU3VibWl0U2VsZWN0b3IpXG5cbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUZvcm1TdWJtaXQpXG5cbiAgICB0aGlzLl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKVxuICB9XG5cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yIiwiY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2R5JylcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcylcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdib2R5X25vc2Nyb2xsJylcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpXG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5X25vc2Nyb2xsJylcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge3RoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KGV2dCl9KVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0ICE9PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc2hvd0J1dHRvbigpIHtjb25zb2xlLmxvZyh0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idG4nKS50ZXh0Q29udGVudCl9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBzdWJtaXRGdW5jdGlvbikge1xuICAgIHN1cGVyKHBvcHVwKVxuICAgIHRoaXMuX3N1Ym1pdEZ1bmN0aW9uID0gc3VibWl0RnVuY3Rpb25cbiAgICB0aGlzLl9pbnB1dENvbnRhaW5lciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXQtY29udGFpbmVyJylcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IHRoaXMuX2lucHV0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQtZmllbGQnKVxuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge31cbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dCkgPT4ge3RoaXMuX2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWV9KVxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlc1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKVxuICAgIHRoaXMuX2lucHV0Q29udGFpbmVyLnJlc2V0KClcbiAgfVxuICBcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2lucHV0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHt0aGlzLl9zdWJtaXRGdW5jdGlvbihldnQsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpfSlcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZ1bGxzY3JlZW4tcG9wdXBfX3RpdGxlJykudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mdWxsc2NyZWVuLXBvcHVwX19pbWcnKS5zcmMgPSBsaW5rO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcil7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtc1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKVxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudClcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuICB9XG5cbiAgcmVuZGVySXRlbXMoZGF0YSkge1xuICAgIHRoaXMuY2xlYXIoKVxuICAgIGRhdGEucmV2ZXJzZSgpLmZvckVhY2goaXRlbSA9PiB7dGhpcy5fcmVuZGVyZXIoaXRlbSl9KVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7bmFtZSwgYWJvdXQsIGF2YXRhcn0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKVxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dClcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhcilcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7bmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50fVxuICB9XG5cbiAgZ2V0dXNlckF2YXRhcigpIHtcbiAgICByZXR1cm4gdGhpcy5fYXZhdGFyLnNyY1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZVxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXRcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhclxuICB9XG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcydcbmltcG9ydCB7Y29uZmlnfSBmcm9tICcuLi91dGlscy91dGlscy5qcydcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJ1xuaW1wb3J0IFBvcHVwV2l0aEJ0biBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEJ0bi5qcydcblxuY29uc3QgY2FyZE9wdGlvbnMgPSB7XG5cbiAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4gZnVsbHNjcmVlblBvcHVwSW5zdGFuY2Uub3BlbihuYW1lLCBsaW5rKSxcblxuICByZW5kZXJDYXJkczogKCkgPT4ge1xuICAgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IGNhcmRzTGlzdC5yZW5kZXJJdGVtcyhkYXRhKSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICB9LFxuXG4gIGFkZE5ld0NhcmQ6IChldnQsIGlucHV0VmFsdWVzKSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBjYXJkID0ge25hbWU6IGlucHV0VmFsdWVzLnBsYWNlLCBsaW5rOiBpbnB1dFZhbHVlcy51cmwsfVxuICAgIGFwaS5hZGRDYXJkKGNhcmQpXG4gICAgLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgIGNyZWF0ZUNhcmQoY2FyZClcbiAgICAgIHBsYWNlUG9wdXBJbnN0YW5jZS5jbG9zZSgpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgfSxcblxuICBzZXRMaWtlOiAoaWQpID0+IGFwaS5saWtlQ2FyZChpZCkuY2F0Y2goKGVycikgPT4gZXJyKSxcblxuICByZW1vdmVMaWtlOiAoaWQpID0+IGFwaS5kaXNsaWtlQ2FyZChpZCkuY2F0Y2goKGVycikgPT4gZXJyKSxcblxuICBzaG93QWxlcnRQb3B1cDogKCkgPT4gcG9wdXB3aXRoQnRuSW5zdGFuY2Uub3BlbigpLFxuXG4gIGhhbmRsZVBsYWNlUG9wdXBCdG46ICgpID0+IHtcbiAgICBwbGFjZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICAgIHBsYWNlUG9wdXBJbnN0YW5jZS5vcGVuKClcbiAgfVxufVxuXG5jb25zdCB1c2VyT3B0aW9ucyA9IHtcbiAgY2hhbmdlVXNlcjogKGV2dCwgaW5wdXRWYWx1ZXMpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgc2hvd1Byb2Nlc3NpbmcodHJ1ZSlcbiAgICBhcGkuc2V0VXNlckRhdGEoaW5wdXRWYWx1ZXMpXG4gICAgICAudGhlbigoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMubmFtZSwgaW5wdXRWYWx1ZXMuYWJvdXQpXG4gICAgICAgIHVzZXJQb3B1cEluc3RhbmNlLmNsb3NlKClcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHNob3dQcm9jZXNzaW5nKGZhbHNlKSlcbiAgfSxcblxuICBoYW5kbGVVc2VyUG9wdXBCdG46ICgpID0+IHtcbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcbiAgICBjb25maWcucG9wdXBOYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lXG4gICAgY29uZmlnLnBvcHVwQWJvdXRJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmFib3V0XG4gICAgdXNlclBvcHVwSW5zdGFuY2Uub3BlbigpXG4gIH0sXG5cbiAgY2hhbmdlQXZhdGFyOiAoZXZ0LCBpbnB1dFZhbHVlKSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICBzaG93UHJvY2Vzc2luZyh0cnVlKVxuICAgIGFwaS5zZXRVc2VyQXZhdGFyKGlucHV0VmFsdWUpXG4gICAgICAudGhlbigoaW5wdXRWYWx1ZSk9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGlucHV0VmFsdWUuYXZhdGFyKVxuICAgICAgUG9wdXBXaXRoQXZhdGFySW5zdGFuY2UuY2xvc2UoKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4gc2hvd1Byb2Nlc3NpbmcoZmFsc2UpKSBcbiAgfSxcbiAgXG4gIGhhbmRsZUF2YXRhckJ0bjogKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJBdmF0YXIgPSB1c2VySW5mby5nZXR1c2VyQXZhdGFyKClcbiAgICBjb25maWcucG9wdXBBdmF0YXJJbnB1dC52YWx1ZSA9IHVzZXJBdmF0YXJcbiAgICBhdmF0YXJGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKClcbiAgICBQb3B1cFdpdGhBdmF0YXJJbnN0YW5jZS5vcGVuKClcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG93UHJvY2Vzc2luZyhwcm9jZXNzaW5nKSB7XG4gIGlmIChwcm9jZXNzaW5nKSB7XG4gICAgICBBcnJheS5mcm9tKGNvbmZpZy5zbWFydFN1Ym1pdHRlcnMpLmZvckVhY2goKHN1Ym1pdCkgPT4ge1xuICAgICAgICAgIHN1Ym1pdC52YWx1ZSA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcbiAgICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgICBBcnJheS5mcm9tKGNvbmZpZy5zbWFydFN1Ym1pdHRlcnMpLmZvckVhY2goKHN1Ym1pdCkgPT4ge1xuICAgICAgICAgIHN1Ym1pdC52YWx1ZSA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XG4gICAgICB9KVxuICB9XG59XG5cbmNvbnN0IHBvcHVwd2l0aEJ0bkluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEJ0bihjb25maWcuZGVsZXRlQWxlcnRQb3B1cClcbnBvcHVwd2l0aEJ0bkluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKClcblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2soY2FyZCkge1xuICBcbiAgcG9wdXB3aXRoQnRuSW5zdGFuY2Uub3BlbigpXG4gIHBvcHVwd2l0aEJ0bkluc3RhbmNlLnNldFN1Ym1pdEZ1bmN0aW9uKCgpID0+IHtcbiAgICBhcGkucmVtb3ZlQ2FyZChjYXJkLl9jYXJkSWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlKClcbiAgICAgICAgcG9wdXB3aXRoQnRuSW5zdGFuY2UuY2xvc2UoKVxuICAgICAgfSlcblxuICB9KVxufVxuXG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgY29uZmlnLmNhcmRUZW1wbGF0ZSwgY2FyZE9wdGlvbnMsIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrLCB1c2VySWQpXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkLmdldEVsZW1lbnQoKVxuICBjYXJkc0xpc3QuYWRkSXRlbShlbGVtZW50KVxufVxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgdXJsOiBgJHtjb25maWcubWVzdG9Vcmx9LyR7Y29uZmlnLm1lc3RvQ29ob3J0SWR9YCxcbiAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIiwgYXV0aG9yaXphdGlvbjogY29uZmlnLm1lc3RvVG9rZW4sfVxufSlcblxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGRhdGEpID0+IGRhdGEpLFxuICByZW5kZXJlcjogaXRlbSA9PiB7Y3JlYXRlQ2FyZChpdGVtKX19LFxuICBjb25maWcuY2FyZEFyZWFTZWxlY3RvclxuKVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7bmFtZTogJy51c2VyX19uYW1lJywgYWJvdXQ6ICcudXNlcl9fYWJvdXQnLCBhdmF0YXI6ICcudXNlcl9fcGhvdG8nfSlcbmNvbnN0IHVzZXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjb25maWcudXNlclBvcHVwKVxudXNlckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cblxuY29uc3QgZnVsbHNjcmVlblBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoY29uZmlnLmZ1bGxzY3JlZW5Qb3B1cClcbmZ1bGxzY3JlZW5Qb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKClcblxuY29uc3QgdXNlclBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcudXNlclBvcHVwLCB1c2VyT3B0aW9ucy5jaGFuZ2VVc2VyKVxudXNlclBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5jb25zdCBwbGFjZVBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcucGxhY2VQb3B1cCwgY2FyZE9wdGlvbnMuYWRkTmV3Q2FyZClcbnBsYWNlUG9wdXBJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpXG5cbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY29uZmlnLnBsYWNlUG9wdXApXG5wbGFjZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cbmNvbnN0IFBvcHVwV2l0aEF2YXRhckluc3RhbmNlID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uZmlnLmF2YXRhclBvcHVwLCB1c2VyT3B0aW9ucy5jaGFuZ2VBdmF0YXIpXG5Qb3B1cFdpdGhBdmF0YXJJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpXG5cbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNvbmZpZy5hdmF0YXJQb3B1cClcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cbmNvbmZpZy51c2VyRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVzZXJPcHRpb25zLmhhbmRsZVVzZXJQb3B1cEJ0bilcbmNvbmZpZy5wbGFjZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhcmRPcHRpb25zLmhhbmRsZVBsYWNlUG9wdXBCdG4pXG5jb25maWcuY2hhbmdlQXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdXNlck9wdGlvbnMuaGFuZGxlQXZhdGFyQnRuKVxuXG5cbmxldCB1c2VySWQgPSAnJ1xuXG5Qcm9taXNlLmFsbChbYXBpLmdldEluaXRpYWxDYXJkcygpLCBhcGkuZ2V0VXNlckRhdGEoKV0pXG4gIC50aGVuKChbY2FyZHMsIGRhdGFdKSA9PiB7XG4gICAgdXNlcklkID0gZGF0YS5faWRcblxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dClcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKVxuICAgIFxuICAgIGNhcmRzTGlzdC5yZW5kZXJJdGVtcyhjYXJkcylcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEJ0biBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICBzdXBlcihwb3B1cClcbiAgICB0aGlzLl9kZWxldGVTdWJtaXR0ZXIgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuanMtZGVsZXRlX3N1Ym1pdHRlcicpXG4gICAgdGhpcy5zdWJtaXRGdW5jdGlvbiA9IG51bGxcbiAgfVxuXG4gIHNldFN1Ym1pdEZ1bmN0aW9uKHN1Ym1pdEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5zdWJtaXRGdW5jdGlvbiA9IHN1Ym1pdEZ1bmN0aW9uXG59XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gZGVidWdnZXJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpXG4gICAgdGhpcy5fZGVsZXRlU3VibWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuc3VibWl0RnVuY3Rpb24oKVxuICAgIH0pXG4gIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9