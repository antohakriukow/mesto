(()=>{"use strict";var e={userEditBtn:document.querySelector(".user__edit-btn"),placeAddBtn:document.querySelector(".user__add-btn"),userPopup:document.querySelector(".popup_user"),placePopup:document.querySelector(".popup_place"),fullscreenPopup:document.querySelector(".fullscreen-popup"),popupNameInput:document.querySelector(".popup__input-field_name"),popupAboutInput:document.querySelector(".popup__input-field_about"),cardTemplate:".card-template",popupInputFieldErrorActive:"popup__input-field-error_active",popupInputFieldError:"popup__input-field_error",popupSubmitBtnDisabled:"popup__submit-btn_disabled",formInputSelector:".popup__input-field",formSubmitSelector:".popup__submit-btn",cardAreaSelector:".card-items"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._place=t.place,this._url=t.url,this._selector=n,this._handleCardClick=r}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0).children[0]}},{key:"_handleDelete",value:function(){this._element.remove()}},{key:"_handleLike",value:function(){this._element.querySelector(".card__heart-btn").classList.toggle("card__heart-btn_active")}},{key:"_setListeners",value:function(){var e=this;this._element.querySelector(".card__trash-btn").addEventListener("click",(function(){return e._handleDelete()})),this._element.querySelector(".card__heart-btn").addEventListener("click",(function(){return e._handleLike()})),this._element.querySelector(".card__img").addEventListener("click",(function(){return e._handleCardClick()}))}},{key:"getElement",value:function(){this._element=this._getTemplate();var e=this._element.querySelector(".card__img");return this._element.querySelector(".card__title").innerText=this._place,e.setAttribute("src",this._url),e.setAttribute("alt",this._place),this._setListeners(),this._element}}])&&t(n.prototype,r),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._formInputErrorActiveClass=t.popupInputFieldErrorActive,this._popupInputFieldError=t.popupInputFieldError,this._popupSubmitBtnDisabled=t.popupSubmitBtnDisabled,this._formInputSelector=t.formInputSelector,this._formSubmitSelector=t.formSubmitSelector}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error")),r=n.previousElementSibling;n.textContent=t,n.classList.add(this._formInputErrorActiveClass),r.classList.add(this._popupInputFieldError)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error")),n=t.previousElementSibling;t.textContent="",t.classList.remove(this._formInputErrorActiveClass),n.classList.remove(this._popupInputFieldError)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._popupSubmitBtnDisabled),t.setAttribute("disabled",!0)):(t.classList.remove(this._popupSubmitBtnDisabled),t.removeAttribute("disabled"))}},{key:"_setValidationEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._formInputSelector)),n=this._formElement.querySelector(this._formSubmitSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e._toggleButtonState(t,n)}))})),this._toggleButtonState(t,n)}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setValidationEventListeners()}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=document.querySelector(".body"),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){u.classList.add("body_noscroll"),this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),u.classList.remove("body_noscroll"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()})),this._popup.addEventListener("click",(function(t){e._closePopupByClickOnOverlay(t)}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closePopupByClickOnOverlay",value:function(e){e.target===e.currentTarget&&this.close()}}])&&i(t.prototype,n),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFunction=t,n._inputContainer=n._popup.querySelector(".popup__input-container"),n._inputFields=n._inputContainer.querySelectorAll(".popup__input-field"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputFields.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"close",value:function(){s(d(u.prototype),"close",this).call(this),this._inputContainer.reset()}},{key:"setEventListeners",value:function(){var e=this;s(d(u.prototype),"setEventListeners",this).call(this),this._inputContainer.addEventListener("submit",(function(t){e._submitFunction(t,e._getInputValues())}))}}])&&l(t.prototype,n),u}(c);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function u(){return h(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e){var t=e.place,n=e.url;this._popup.querySelector(".fullscreen-popup__title").textContent=t,this._popup.querySelector(".fullscreen-popup__img").src=n,m(S(u.prototype),"open",this).call(this)}}])&&v(t.prototype,n),u}(c);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._items.forEach((function(t){e._renderer(t)}))}}])&&k(t.prototype,n),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n=t.name,r=t.about;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e,t){this._name.textContent=e,this._about.textContent=t}}])&&I(t.prototype,n),e}(),L=new g(e.fullscreenPopup);function C(t){var r=new n(t,e.cardTemplate,(function(){return L.open(t)})).getElement();P.addItem(r)}L.setEventListeners();var P=new w({items:[{place:"Архыз",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{place:"Челябинская область",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{place:"Иваново",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{place:"Камчатка",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{place:"Холмогорский район",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{place:"Байкал",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){C(e)}},e.cardAreaSelector);P.renderItems();var j=new O({name:".user__name",about:".user__about"});new o(e,e.userPopup).enableValidation();var q=new y(e.userPopup,(function(e,t){e.preventDefault(),j.setUserInfo(t.name,t.about),q.close()}));q.setEventListeners(),e.userEditBtn.addEventListener("click",(function(){var t=j.getUserInfo();e.popupNameInput.value=t.name,e.popupAboutInput.value=t.about,q.open()})),new o(e,e.placePopup).enableValidation();var x=new y(e.placePopup,(function(e,t){e.preventDefault(),C(t),x.close()}));x.setEventListeners(),e.placeAddBtn.addEventListener("click",(function(){x.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsInVzZXJFZGl0QnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGxhY2VBZGRCdG4iLCJ1c2VyUG9wdXAiLCJwbGFjZVBvcHVwIiwiZnVsbHNjcmVlblBvcHVwIiwicG9wdXBOYW1lSW5wdXQiLCJwb3B1cEFib3V0SW5wdXQiLCJjYXJkVGVtcGxhdGUiLCJwb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZSIsInBvcHVwSW5wdXRGaWVsZEVycm9yIiwicG9wdXBTdWJtaXRCdG5EaXNhYmxlZCIsImZvcm1JbnB1dFNlbGVjdG9yIiwiZm9ybVN1Ym1pdFNlbGVjdG9yIiwiY2FyZEFyZWFTZWxlY3RvciIsIkNhcmQiLCJkYXRhIiwic2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX3BsYWNlIiwicGxhY2UiLCJfdXJsIiwidXJsIiwiX3NlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjaGlsZHJlbiIsIl9lbGVtZW50IiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZSIsIl9nZXRUZW1wbGF0ZSIsImltZyIsImlubmVyVGV4dCIsInNldEF0dHJpYnV0ZSIsIl9zZXRMaXN0ZW5lcnMiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9mb3JtSW5wdXRFcnJvckFjdGl2ZUNsYXNzIiwiX3BvcHVwSW5wdXRGaWVsZEVycm9yIiwiX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQiLCJfZm9ybUlucHV0U2VsZWN0b3IiLCJfZm9ybVN1Ym1pdFNlbGVjdG9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJlcnJvcklucHV0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInRleHRDb250ZW50IiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0VmFsaWRhdGlvbkV2ZW50TGlzdGVuZXJzIiwiYm9keSIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwiX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5Iiwia2V5IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGdW5jdGlvbiIsIl9zdWJtaXRGdW5jdGlvbiIsIl9pbnB1dENvbnRhaW5lciIsIl9pbnB1dEZpZWxkcyIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhJbWFnZSIsInNyYyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJjbGVhciIsIml0ZW0iLCJVc2VySW5mbyIsImFib3V0IiwiX25hbWUiLCJfYWJvdXQiLCJmdWxsc2NyZWVuUG9wdXBJbnN0YW5jZSIsImNyZWF0ZUNhcmQiLCJvcGVuIiwiZ2V0RWxlbWVudCIsImNhcmRzTGlzdCIsImFkZEl0ZW0iLCJzZXRFdmVudExpc3RlbmVycyIsInJlbmRlckl0ZW1zIiwidXNlckluZm8iLCJGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInVzZXJQb3B1cEluc3RhbmNlIiwiaW5wdXRWYWx1ZXMiLCJzZXRVc2VySW5mbyIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJwbGFjZVBvcHVwSW5zdGFuY2UiXSwibWFwcGluZ3MiOiJtQkFBTyxJQ0FNQSxFQUFTLENBQ3BCQyxZQUFhQyxTQUFTQyxjQUFjLG1CQUNwQ0MsWUFBYUYsU0FBU0MsY0FBYyxrQkFFcENFLFVBQVdILFNBQVNDLGNBQWMsZUFDbENHLFdBQVlKLFNBQVNDLGNBQWMsZ0JBQ25DSSxnQkFBaUJMLFNBQVNDLGNBQWMscUJBRXhDSyxlQUFnQk4sU0FBU0MsY0FBYyw0QkFDdkNNLGdCQUFpQlAsU0FBU0MsY0FBYyw2QkFFeENPLGFBQWMsaUJBRWRDLDJCQUE0QixrQ0FDNUJDLHFCQUFzQiwyQkFDdEJDLHVCQUF3Qiw2QkFFeEJDLGtCQUFtQixzQkFDbkJDLG1CQUFvQixxQkFDcEJDLGlCQUFrQixlLDBLQ25CQ0MsRSxXQUNuQixX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aUIsU0FKcEMsV0FDRW1HLEVBQW1CZCxXIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgcGxhY2U6ICfQkNGA0YXRi9C3JyxcbiAgICB1cmw6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgfSxcbiAge1xuICAgIHBsYWNlOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICB1cmw6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgIHVybDogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICB9LFxuICB7XG4gICAgcGxhY2U6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gIH0sXG4gIHtcbiAgICBwbGFjZTogJ9CR0LDQudC60LDQuycsXG4gICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnLFxuICB9XG5dOyIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHVzZXJFZGl0QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fZWRpdC1idG4nKSwgLy8g0JrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LjQvdGE0L7QvdC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIHBsYWNlQWRkQnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fYWRkLWJ0bicpLCAvLyDQmtC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuXG4gIHVzZXJQb3B1cDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3VzZXInKSwgLy8g0J/QvtC/0LDQvyBVc2VyXG4gIHBsYWNlUG9wdXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9wbGFjZScpLCAvLyDQn9C+0L/QsNC/IFBsYWNlXG4gIGZ1bGxzY3JlZW5Qb3B1cDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZ1bGxzY3JlZW4tcG9wdXAnKSwgLy8g0KTRg9C70LvRgdC60YDQuNC9INC/0L7Qv9Cw0L9cblxuICBwb3B1cE5hbWVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dC1maWVsZF9uYW1lJyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvNC10L3QuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgcG9wdXBBYm91dElucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0LWZpZWxkX2Fib3V0JyksIC8vINCf0L7Qu9C1INCy0LLQvtC00LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIFxuICBjYXJkVGVtcGxhdGU6ICcuY2FyZC10ZW1wbGF0ZScsXG5cbiAgcG9wdXBJbnB1dEZpZWxkRXJyb3JBY3RpdmU6ICdwb3B1cF9faW5wdXQtZmllbGQtZXJyb3JfYWN0aXZlJyxcbiAgcG9wdXBJbnB1dEZpZWxkRXJyb3I6ICdwb3B1cF9faW5wdXQtZmllbGRfZXJyb3InLFxuICBwb3B1cFN1Ym1pdEJ0bkRpc2FibGVkOiAncG9wdXBfX3N1Ym1pdC1idG5fZGlzYWJsZWQnLFxuXG4gIGZvcm1JbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dC1maWVsZCcsXG4gIGZvcm1TdWJtaXRTZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ0bicsXG4gIGNhcmRBcmVhU2VsZWN0b3I6ICcuY2FyZC1pdGVtcycsXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9wbGFjZSA9IGRhdGEucGxhY2VcbiAgICB0aGlzLl91cmwgPSBkYXRhLnVybFxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2tcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkuY2hpbGRyZW5bMF1cbiAgfVxuXG4gIF9oYW5kbGVEZWxldGUoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKVxuICB9XG5cbiAgX2hhbmRsZUxpa2UoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQtYnRuJykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9faGVhcnQtYnRuX2FjdGl2ZScpXG4gIH1cblxuICBfc2V0TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RyYXNoLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlKCkpXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHRoaXMuX2hhbmRsZUxpa2UoKSlcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljaygpKVxuICB9XG5cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICBjb25zdCBpbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWcnKVxuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS5pbm5lclRleHQgPSB0aGlzLl9wbGFjZTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl91cmwpO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuX3BsYWNlKTtcblxuICAgIHRoaXMuX3NldExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRcbiAgfVxufSIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvciAoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIC8vIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnRcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50XG4gICAgdGhpcy5fZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcyA9IGNvbmZpZy5wb3B1cElucHV0RmllbGRFcnJvckFjdGl2ZVxuICAgIHRoaXMuX3BvcHVwSW5wdXRGaWVsZEVycm9yID0gY29uZmlnLnBvcHVwSW5wdXRGaWVsZEVycm9yXG4gICAgdGhpcy5fcG9wdXBTdWJtaXRCdG5EaXNhYmxlZCA9IGNvbmZpZy5wb3B1cFN1Ym1pdEJ0bkRpc2FibGVkXG4gICAgdGhpcy5fZm9ybUlucHV0U2VsZWN0b3IgPSBjb25maWcuZm9ybUlucHV0U2VsZWN0b3JcbiAgICB0aGlzLl9mb3JtU3VibWl0U2VsZWN0b3IgPSBjb25maWcuZm9ybVN1Ym1pdFNlbGVjdG9yXG4gIH1cblxuICAgIC8vINCf0L7QutCw0LfQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgIGNvbnN0IGVycm9ySW5wdXQgPSBlcnJvckVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZ1xuXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcylcbiAgICBlcnJvcklucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fcG9wdXBJbnB1dEZpZWxkRXJyb3IpXG4gIH1cblxuICAvLyDQodC60YDRi9GC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1XG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYClcbiAgICBjb25zdCBlcnJvcklucHV0ID0gZXJyb3JFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmdcblxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybUlucHV0RXJyb3JBY3RpdmVDbGFzcylcbiAgICBlcnJvcklucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBJbnB1dEZpZWxkRXJyb3IpXG4gIH1cblxuICAvLyDQpNGD0L3QutGG0LjRjyDQstCw0LvQuNC00LDRhtC40LhcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcbiAgICB9XG4gIH1cblxuICAvLyDQn9GA0L7QstC10YDQutCwINC90LAg0L3QsNC70LjRh9C40LUg0L3QtdCy0LDQu9C40LTQvdC+0LPQviDQv9C+0LvRjyBcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZClcbiAgfVxuXG4gIC8vINCY0LfQvNC10L3QtdC90LjQtSDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4XG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9wb3B1cFN1Ym1pdEJ0bkRpc2FibGVkKVxuICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BvcHVwU3VibWl0QnRuRGlzYWJsZWQpXG4gICAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKVxuICAgIH1cbiAgfVxuXG4gIC8vIExpc3RlbmVyc1xuICBfc2V0VmFsaWRhdGlvbkV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtSW5wdXRTZWxlY3RvcikpXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVN1Ym1pdFNlbGVjdG9yKVxuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KVxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUZvcm1TdWJtaXQpXG5cbiAgICB0aGlzLl9zZXRWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3IiLCJjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvZHknKVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cFxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2JvZHlfbm9zY3JvbGwnKVxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJylcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHlfbm9zY3JvbGwnKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7dGhpcy5fY2xvc2VQb3B1cEJ5Q2xpY2tPbk92ZXJsYXkoZXZ0KX0pXG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICBfY2xvc2VQb3B1cEJ5Q2xpY2tPbk92ZXJsYXkoZXZ0KSB7XG4gICAgaWYgKGV2dC50YXJnZXQgIT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXAsIHN1Ym1pdEZ1bmN0aW9uKSB7XG4gICAgc3VwZXIocG9wdXApXG4gICAgdGhpcy5fc3VibWl0RnVuY3Rpb24gPSBzdWJtaXRGdW5jdGlvblxuICAgIHRoaXMuX2lucHV0Q29udGFpbmVyID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dC1jb250YWluZXInKVxuICAgIHRoaXMuX2lucHV0RmllbGRzID0gdGhpcy5faW5wdXRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dC1maWVsZCcpXG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fVxuICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goKGlucHV0KSA9PiB7dGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZX0pXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpXG4gICAgdGhpcy5faW5wdXRDb250YWluZXIucmVzZXQoKVxuICB9XG4gIFxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpXG4gICAgdGhpcy5faW5wdXRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge3RoaXMuX3N1Ym1pdEZ1bmN0aW9uKGV2dCwgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSl9KVxuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKHtwbGFjZSwgdXJsfSkge1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mdWxsc2NyZWVuLXBvcHVwX190aXRsZScpLnRleHRDb250ZW50ID0gcGxhY2U7XG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZ1bGxzY3JlZW4tcG9wdXBfX2ltZycpLnNyYyA9IHVybDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKXtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnXG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLmNsZWFyKClcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge3RoaXMuX3JlbmRlcmVyKGl0ZW0pfSlcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe25hbWUsIGFib3V0fSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpXG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0KVxuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LCBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnR9XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dFxuICB9XG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcydcbmltcG9ydCB7aW5pdGlhbENhcmRzfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXG5pbXBvcnQge2NvbmZpZ30gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJ1xuXG4vL0NhcmRzICsgRnVsbHNjcmVlbiBQb3B1cFxuY29uc3QgZnVsbHNjcmVlblBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoY29uZmlnLmZ1bGxzY3JlZW5Qb3B1cClcbmZ1bGxzY3JlZW5Qb3B1cEluc3RhbmNlLnNldEV2ZW50TGlzdGVuZXJzKClcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZCAoaXRlbSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgY29uZmlnLmNhcmRUZW1wbGF0ZSwgKCkgPT4gZnVsbHNjcmVlblBvcHVwSW5zdGFuY2Uub3BlbihpdGVtKSlcbiAgICBjb25zdCBlbGVtZW50ID0gY2FyZC5nZXRFbGVtZW50KClcbiAgICBjYXJkc0xpc3QuYWRkSXRlbShlbGVtZW50KVxufVxuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gIHJlbmRlcmVyOiBpdGVtID0+IHtjcmVhdGVDYXJkKGl0ZW0pfX0sXG4gIGNvbmZpZy5jYXJkQXJlYVNlbGVjdG9yXG4pXG5cbmNhcmRzTGlzdC5yZW5kZXJJdGVtcygpO1xuXG4vL3VzZXIgUG9wdXBcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtuYW1lOiAnLnVzZXJfX25hbWUnLCBhYm91dDogJy51c2VyX19hYm91dCd9KVxuY29uc3QgdXNlckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNvbmZpZy51c2VyUG9wdXApXG51c2VyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcblxuXG5jb25zdCB1c2VyUG9wdXBJbnN0YW5jZSA9IG5ldyBQb3B1cFdpdGhGb3JtKGNvbmZpZy51c2VyUG9wdXAsIChldnQsIGlucHV0VmFsdWVzKSA9PntcbiAgZXZ0LnByZXZlbnREZWZhdWx0KClcblxuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5hYm91dClcbiAgdXNlclBvcHVwSW5zdGFuY2UuY2xvc2UoKVxufSlcblxudXNlclBvcHVwSW5zdGFuY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5mdW5jdGlvbiBoYW5kbGVVc2VyUG9wdXBCdG4oKSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKVxuICBjb25maWcucG9wdXBOYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lXG4gIGNvbmZpZy5wb3B1cEFib3V0SW5wdXQudmFsdWUgPSB1c2VyRGF0YS5hYm91dFxuICB1c2VyUG9wdXBJbnN0YW5jZS5vcGVuKClcbn1cblxuY29uZmlnLnVzZXJFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlVXNlclBvcHVwQnRuKVxuXG4vL3BsYWNlIFBvcHVwXG5jb25zdCBwbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNvbmZpZy5wbGFjZVBvcHVwKVxucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxuXG5jb25zdCBwbGFjZVBvcHVwSW5zdGFuY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25maWcucGxhY2VQb3B1cCwgKGV2dCwgaW5wdXRWYWx1ZXMpID0+e1xuICBldnQucHJldmVudERlZmF1bHQoKVxuICBcbiAgY3JlYXRlQ2FyZChpbnB1dFZhbHVlcylcbiAgcGxhY2VQb3B1cEluc3RhbmNlLmNsb3NlKClcbn0pXG5cbnBsYWNlUG9wdXBJbnN0YW5jZS5zZXRFdmVudExpc3RlbmVycygpXG5cbmZ1bmN0aW9uIGhhbmRsZVBsYWNlUG9wdXBCdG4oKSB7XG4gIHBsYWNlUG9wdXBJbnN0YW5jZS5vcGVuKClcbn1cblxuY29uZmlnLnBsYWNlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlUGxhY2VQb3B1cEJ0bikiXSwic291cmNlUm9vdCI6IiJ9